!function(t,e,i){t(e).on("load",(function(){!function(){if("undefined"==typeof WebFont){let t=i.createElement("script");t.src=parent.customify.config.webfontloader_url,t.type="text/javascript";let e=i.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}}()}));const n=[];t(i).ready((function(){const o=parent.wp.customize,s=parent.customify,c=o.settings.settings;t.each(s.config.settings,(function(e,n){const s=void 0===n.properties_prefix?"":n.properties_prefix;if("font"===n.type)o(e,(function(e){e.bind((function(e){const i=p(e);if(void 0!==i){void 0!==i.font_family&&d(i);const e=l(this.id,i);if(_.isEmpty(e))return;const o=f(this.id,e,s);t("#customify_font_output_for_"+n.html_safe_option_id).html(o)}}))}));else if(void 0!==c&&void 0!==c[e]&&void 0!==n.css&&void 0!==n.live&&!0===n.live)o(e,(function(e){e.bind((function(e){t.each(n.css,(function(i,o){let s=[];s[o.property]=o.selector,void 0!==o.callback_filter&&(s.callback=o.callback_filter);let c={properties:s,propertyValue:e,negative_value:!!o.hasOwnProperty("negative_value")&&o.negative_value};void 0!==this.unit&&(c.unit=this.unit);const l=new RegExp("-","g"),f=".dynamic_setting_"+n.html_safe_option_id+"_property_"+o.property.replace(l,"_")+"_"+i;t(f).cssUpdate(c)}))}))}));else if("object"==typeof n.live&&n.live.length>0){const s=n.live.join();t.inArray(n.type,["text","textarea","ace_editor"])>-1&&o(e,(function(e){e.bind((function(e){i.createElement("div").innerHTML=e,t(s).html(e)}))}))}}));const l=function(t,e){let i={};if(void 0!==e.font_family&&""!==e.font_family&&(i["font-family"]=e.font_family),void 0!==e.selected_variants&&""!==e.selected_variants){let t="";void 0!==e.selected_variants&&null!==e.selected_variants?t=e.selected_variants:void 0!==e.variants&&void 0!==e.variants[0]&&(t=e.variants[0]),_.isString(t)&&-1!==t.indexOf("italic")&&(i["font-style"]="italic",t=t.replace("italic","")),""!==t&&("regular"===t&&(t="normal"),i["font-weight"]=t)}return void 0!==e.font_size&&""!==e.font_size&&(i["font-size"]=e.font_size,isNaN(e.font_size)&&void 0!==e.font_size.value?(i["font-size"]=e.font_size.value,void 0!==e.font_size.unit&&(i["font-size"]+=e.font_size.unit)):i["font-size"]+=u(t,"font-size")),void 0!==e.letter_spacing&&""!==e.letter_spacing&&(i["letter-spacing"]=e.letter_spacing,isNaN(e.letter_spacing)&&void 0!==e.letter_spacing.value?(i["letter-spacing"]=e.letter_spacing.value,void 0!==e.letter_spacing.unit&&(i["letter-spacing"]+=e.letter_spacing.unit)):i["letter-spacing"]+=u(t,"letter-spacing")),void 0!==e.line_height&&""!==e.line_height&&(i["line-height"]=e.line_height,isNaN(e.line_height)&&void 0!==e.line_height.value?(i["line-height"]=e.line_height.value,void 0!==e.line_height.unit&&(i["line-height"]+=e.line_height.unit)):i["line-height"]+=u(t,"line-height")),void 0!==e.text_align&&""!==e.text_align&&(i["text-align"]=e.text_align),void 0!==e.text_transform&&""!==e.text_transform&&(i["text-transform"]=e.text_transform),void 0!==e.text_decoration&&""!==e.text_decoration&&(i["text-decoration"]=e.text_decoration),i},f=function(t,i,n){const o=s.config.settings[t];let c="";if(void 0!==e&&void 0!==o.callback&&"function"==typeof e[o.callback])c=e[o.callback](i,o);else{if(void 0===o.selector||_.isEmpty(o.selector))return c;const t=[],e={};_.each(o.selector,(function(i,n){_.isEmpty(i.properties)?t.push(n):e[n]=i})),_.isEmpty(t)||(c+="\n"+t.join(", ")+" {\n",c+=r(i,[],n),c+="}\n"),_.isEmpty(e)||_.each(e,(function(t,e){c+="\n"+e+" {\n",c+=r(i,t.properties,n),c+="}\n"}))}return c},r=function(e,i=!1,n=""){let o="";return t.each(e,(function(t,e){""!==e&&a(t,i)&&(o+=n+t+": "+e+";\n")})),o},a=function(t,e=!1){return!_.isEmpty(t)&&(!!_.isEmpty(e)||(!!_.contains(e,t)||!(!_.has(e,t)||!e[t])))},u=function(t,e){return void 0===s.config.settings[t]||void 0===s.config.settings[t].fields[e]?"":void 0!==s.config.settings[t].fields[e].unit?s.config.settings[t].fields[e].unit:void 0!==s.config.settings[t].fields[e][3]?s.config.settings[t].fields[e][3]:""},d=function(t){if(void 0===t.font_family)return;let e=t.font_family;const i=s.fontFields.determineFontType(e);if("theme_font"===i||"cloud_font"===i){if(void 0===t.src){let n;n="theme_font"===i?Object.keys(s.config.theme_fonts).map(t=>s.config.theme_fonts[t]):Object.keys(s.config.cloud_fonts).map(t=>s.config.cloud_fonts[t]);const o=n.findIndex(t=>t.family===e);o>-1&&(t.src=n[o].src)}if(void 0===t.src)return;if(void 0!==t.variants){let i=p(t.variants);"string"==typeof i||"number"==typeof i?i=[i]:"object"==typeof i&&(i=Object.values(i)),e=e+":"+i.map((function(t){return s.fontFields.convertFontVariantToFVD(t)})).join(",")}-1===n.indexOf(e)&&(setTimeout((function(){WebFont.load({custom:{families:[e],urls:[t.src]},classes:!1,events:!1,error:function(t){console.log(t)},active:function(){sessionStorage.fonts=!0}})}),10),n.push(e))}else if("google"===i){let i=null,o=null;void 0!==t.variants&&(i=p(t.variants),"string"==typeof i||"number"==typeof i?i=[i]:"object"==typeof i&&(i=Object.values(i)),e=e+":"+i.join(",")),void 0!==t.selected_subsets&&(o=p(t.selected_subsets),"string"==typeof o||"number"==typeof o?o=[o]:"object"==typeof o&&(o=Object.values(o)),e=e+":"+o.join(",")),-1===n.indexOf(e)&&(setTimeout((function(){WebFont.load({google:{families:[e]},classes:!1,events:!1,error:function(t){console.log(t)},active:function(){sessionStorage.fonts=!0}})}),10),n.push(e))}},p=function(t){let e;if("string"!=typeof t)return t;try{e=JSON.parse(decodeURIComponent(t))}catch(i){e=t}return e}}))}(jQuery,window,document);