!function(t,e,i){t(e).on("load",(function(){!function(){if("undefined"==typeof WebFont){let t=i.createElement("script");t.src=parent.customify.config.webfontloader_url,t.type="text/javascript";let e=i.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}}()}));const n=[];t((function(){const o=parent.wp.customize,s=parent.customify,l=o.settings.settings,f=new RegExp("-","g");t.each(s.config.settings,(function(e,n){const s=void 0===n.properties_prefix?"":n.properties_prefix;if("font"===n.type)o(e,(function(e){e.bind((function(e){const i=h(e);if(void 0===i)return;void 0!==i.font_family&&g(i);const o=t("#customify_font_output_for_"+n.html_safe_option_id);if(!o.length)return;const l=r(this.id,i);_.isEmpty(l)?o.html(""):o.html(c(this.id,l,s))}))}));else if(void 0!==l&&void 0!==l[e]&&void 0!==n.css&&void 0!==n.live&&!0===n.live)o(e,(function(e){e.bind((function(e){t.each(n.css,(function(i,o){const s=t(".dynamic_setting_"+n.html_safe_option_id+"_property_"+o.property.replace(f,"_")+"_"+i);if(!s.length)return;const l={};if(void 0!==o.property&&void 0!==o.selector&&(l[o.property]=o.selector),void 0!==o.callback_filter&&(l.callback=o.callback_filter),_.isEmpty(l))return;const r={properties:l,propertyValue:e,negative_value:!!o.hasOwnProperty("negative_value")&&o.negative_value};void 0!==this.unit&&(r.unit=this.unit),s.cssUpdate(r)}))}))}));else if("object"==typeof n.live&&n.live.length>0){const s=n.live.join();t.inArray(n.type,["text","textarea","ace_editor"])>-1&&o(e,(function(e){e.bind((function(e){i.createElement("div").innerHTML=e,t(s).html(e)}))}))}}));const r=function(t,e){const i={};if(void 0===e.font_family||_.includes(["","false",!1],e.font_family)||(i["font-family"]=e.font_family),void 0!==e.font_variant&&!_.includes(["","false",!1],e.font_variant)){let t=e.font_variant;_.isString(t)?(-1!==t.indexOf("italic")?(i["font-style"]="italic",t=t.replace("italic","")):-1!==t.indexOf("oblique")&&(i["font-style"]="oblique",t=t.replace("oblique","")),""!==t&&("regular"===t&&(t="normal"),i["font-weight"]=t)):_.isNumeric(t)&&(i["font-weight"]=t)}if(void 0!==e.font_size&&!_.includes(["","false",!1],e.font_size)){let n=!1;i["font-size"]=e.font_size,isNaN(e.font_size)&&void 0!==e.font_size.value?(i["font-size"]=e.font_size.value,void 0!==e.font_size.unit&&(n=e.font_size.unit)):n=p(t,"font-size"),!1!==n&&(i["font-size"]+=n)}if(void 0!==e.letter_spacing&&!_.includes(["","false",!1],e.letter_spacing)){let n=!1;i["letter-spacing"]=e.letter_spacing,isNaN(e.letter_spacing)&&void 0!==e.letter_spacing.value?(i["letter-spacing"]=e.letter_spacing.value,void 0!==e.letter_spacing.unit&&(n=e.letter_spacing.unit)):n=p(t,"letter-spacing"),!1!==n&&(i["letter-spacing"]+=n)}if(void 0!==e.line_height&&!_.includes(["","false",!1],e.line_height)){let n=!1;i["line-height"]=e.line_height,isNaN(e.line_height)&&void 0!==e.line_height.value?(i["line-height"]=e.line_height.value,void 0!==e.line_height.unit&&(n=e.line_height.unit)):n=p(t,"line-height"),!1!==n&&(i["line-height"]+=n)}return void 0===e.text_align||_.includes(["","false",!1],e.text_align)||(i["text-align"]=e.text_align),void 0===e.text_transform||_.includes(["","false",!1],e.text_transform)||(i["text-transform"]=e.text_transform),void 0===e.text_decoration||_.includes(["","false",!1],e.text_decoration)||(i["text-decoration"]=e.text_decoration),i},c=function(t,i,n){const o=s.config.settings[t];let l="";if(void 0!==e&&void 0!==o.callback&&"function"==typeof e[o.callback])return e[o.callback](i,o);if(void 0===o.selector||_.isEmpty(o.selector)||_.isEmpty(i))return l;const f=d(o.fields),r=[],c={};return _.each(o.selector,(function(t,e){_.isEmpty(t.properties)?r.push(e):c[e]=t})),_.isEmpty(r)||(l+="\n"+r.join(", ")+" {\n",l+=a(i,f,n),l+="}\n"),_.isEmpty(c)||_.each(c,(function(t,e){l+="\n"+e+" {\n",l+=a(i,t.properties,n),l+="}\n"})),l},a=function(e,i=!1,n=""){let o="";return t.each(e,(function(t,e){""!==e&&!1!==e&&u(t,i)&&(o+=n+t+": "+e+";\n")})),o},u=function(t,e=!1){return!_.isEmpty(t)&&(!!_.isEmpty(e)||(!!_.includes(e,t)||!(!_.has(e,t)||!e[t])))},d=function(t){const e={"font-family":!1,"font-weight":!1,"font-style":!1,"font-size":!1,"line-height":!1,"letter-spacing":!1,"text-align":!1,"text-transform":!1,"text-decoration":!1};if(_.isEmpty(t))return e;const i=new RegExp("_","g");return _.each(t,(function(e,n){const o=n.replace(i,"-");o!==n&&(t[o]=e,delete t[n])})),_.each(t,(function(t,i){void 0!==e[i]&&(e[i]=!!t,"font-weight"===i&&(e["font-style"]=e[i]))})),e},p=function(t,e){return void 0===s.config.settings[t]||void 0===s.config.settings[t].fields[e]?!_.includes(["font-family","font-weight","font-style","line-height","text-align","text-transform","text-decoration"],e)&&"px":void 0!==s.config.settings[t].fields[e].unit?!_.includes(["","false"],s.config.settings[t].fields[e].unit)&&s.config.settings[t].fields[e].unit:void 0!==s.config.settings[t].fields[e][3]?!_.includes(["","false"],s.config.settings[t].fields[e][3])&&s.config.settings[t].fields[e][3]:"px"},g=function(t){if(void 0===t.font_family)return;let e=t.font_family;const i=s.fontFields.determineFontType(e);if("std_font"===i)return;const o=s.fontFields.getFontDetails(e,i);if("theme_font"===i||"cloud_font"===i){if(void 0===typeof o.src)return;let i=void 0!==t.font_variant?t.font_variant:void 0!==o.variants?o.variants:[];_.isEmpty(i)||(i=v(h(i)),_.isEmpty(i)||(e=e+":"+i.map((function(t){return s.fontFields.convertFontVariantToFVD(t)})).join(","))),-1===n.indexOf(e)&&(WebFont.load({custom:{families:[e],urls:[o.src]},classes:!1,events:!1,error:function(t){console.log(t)},active:function(){sessionStorage.fonts=!0}}),n.push(e))}else if("google_font"===i){let i=void 0!==t.font_variant?t.font_variant:void 0!==o.variants?o.variants:[];_.isEmpty(i)||(i=v(h(i)),_.isEmpty(i)||(e=e+":"+i.join(",")));let s=void 0!==t.selected_subsets?t.selected_subsets:[];_.isEmpty(s)||(s=v(h(s)),_.isEmpty(s)||(e=e+":"+s.join(","))),-1===n.indexOf(e)&&(WebFont.load({google:{families:[e]},classes:!1,events:!1,error:function(t){console.log(t)},active:function(){sessionStorage.fonts=!0}}),n.push(e))}},v=function(t){return"string"==typeof t||"number"==typeof t?t=[t]:"object"==typeof t&&(t=Object.values(t)),t},h=function(t){if("string"!=typeof t)return t;let e;try{e=JSON.parse(decodeURIComponent(t))}catch(i){e=t}return e}}))}(jQuery,window,document);