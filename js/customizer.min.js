window.customify=window.customify||parent.customify||{},function(t,e,n){const i=n.customize,o=t(window),s=t(document);function a(n){n.preventDefault(),confirm(e.l10n.resetGlobalConfirmMessage)&&(t.each(i.settings.controls,(function(t,n){const i=t.replace("_control",""),o=e.config.settings[i];_.isUndefined(o)||_.isUndefined(o.default)||f(i,o.default)})),i.previewer.save())}function c(n){n.preventDefault();const o=t(this).data("panel"),s=i.panel(o).sections();confirm(e.l10n.resetPanelConfirmMessage)&&s.length>0&&t.each(s,(function(){const n=this.controls();n.length>0&&t.each(n,(function(t,n){const i=n.id.replace("_control",""),o=e.config.settings[i];_.isUndefined(o)||_.isUndefined(o.default)||f(i,o.default)}))}))}function r(n){n.preventDefault();const o=t(this).data("section"),s=i.section(o).controls();confirm(e.l10n.resetSectionConfirmMessage)&&s.length>0&&t.each(s,(function(t,n){const i=n.id.replace("_control",""),o=e.config.settings[i];_.isUndefined(o)||_.isUndefined(o.default)||f(i,o.default)}))}i.bind("ready",(function(){let n=null;void 0===e.connectedFieldsCallbacks&&(e.connectedFieldsCallbacks={}),t(".customify_ace_editor").each((function(e,i){const o=t(this).attr("id"),s=ace.edit(o),a=t(this).data("editor_type");s.setTheme("ace/theme/github"),s.getSession().setMode("ace/mode/"+a);const c=t("#"+o+"_textarea").hide();s.getSession().setValue(c.val()),s.getSession().on("change",(function(t){null!==n?(clearTimeout(n),n=null):n=setTimeout((function(){c.val(s.getSession().getValue()),c.trigger("change")}),1500)}))})),t(".customify_select2").select2(),e.fontFields.init(),t('.accordion-section-content[id*="'+e.config.options_name+'"], #sub-accordion-section-style_manager_section').each((function(){d(this)})),t("body").on("customify:preset-change",(function(e){const n=t(e.target).data("options");_.isUndefined(n)||t.each(n,(function(t,e){f(t,e)}))})),s.on("change","select.js-customify-preset",(function(){const e=t(this);e.children('[value="'+e.val()+'"]').trigger("customify:preset-change")})),s.on("click",".js-customify-preset input",(function(){t(this).trigger("customify:preset-change")})),p.init(),setTimeout((function(){u()}),1e3),t('button[data-action="reset_customify"]').length>0&&(t(".panel-meta").each((function(n,i){const o=t(i);let s=o.parents(".control-panel").attr("id");if(void 0!==s){s=s.replace("sub-accordion-panel-",""),s=s.replace("accordion-panel-","");const n=t('<li class="customize-control customize-control-reset"></li>');t('<button class="button js-reset-panel" data-panel="'+s+'"></button>').text(e.l10n.panelResetButton).appendTo(n),o.parent().append(n)}})),t(".accordion-section-content").each((function(n,i){const o=t(this),s=o.attr("id");if(_.isUndefined(s)||-1===s.indexOf(e.config.options_name))return;const a=s.replace("sub-accordion-section-",""),c=t('<button class="button js-reset-section" data-section="'+a+'"></button>'),r=t('<li class="customize-control customize-control-reset"></li>');c.text(e.l10n.sectionResetButton),r.append(c),o.append(r)})),s.on("click",".js-reset-panel",c),s.on("click",".js-reset-section",r),s.on("click","#customize-control-reset_customify button",a)),t(".js-section-navigation").each((function(){const e=t(this),n=e.parents(".accordion-section-content").find(".customize-section-title"),i=e.closest(".customize-control");e.appendTo(n),n.parent().addClass("has-nav"),i.addClass("screen-reader-text")})),t(".js-section-navigation a").on("click",(function(e){e.preventDefault();const n=t(this),i=n.parents(".wp-full-overlay-sidebar-content"),o=n.parents(".accordion-section-content"),s=n.attr("href");if("#"!==s){const e=t("#customize-header-actions").outerHeight(),n=o.find(".customize-section-title").outerHeight(),a=t(s).position().top;i.animate({scrollTop:a-n-e},500)}})),l(),h(),m("save_customizer_once")&&i.previewer.save(),t(window).bind("keydown",(function(t){(t.ctrlKey||t.metaKey)&&"s"===String.fromCharCode(t.which).toLowerCase()&&(t.preventDefault(),i.previewer.save())}))}));const l=function(){_.each(i.settings.settings,(function(t,n){if(void 0!==e.colorPalettes&&void 0!==e.colorPalettes.masterSettingIds&&_.includes(e.colorPalettes.masterSettingIds,n))return;if(void 0!==e.fontPalettes&&void 0!==e.fontPalettes.masterSettingIds&&_.includes(e.fontPalettes.masterSettingIds,n))return;const o=i(n);void 0!==t.connected_fields&&(e.connectedFieldsCallbacks[n]=function(t,e){return function(e,n){_.each(t.connected_fields,(function(t){if(_.isUndefined(t)||_.isUndefined(t.setting_id)||!_.isString(t.setting_id))return;const n=i(t.setting_id);_.isUndefined(n)||n.set(e)}))}}(t),o.bind(e.connectedFieldsCallbacks[n]))}))},d=function(e){t(e).find('input[type="range"]').each((function(){const e=t(this);let n=e.siblings(".range-value");n.length||(n=e.clone(),n.attr("type","number").attr("class","range-value").removeAttr("data-field"),e.first().attr("id")&&n.attr("id",e.first().attr("id")+"_number"),n.insertAfter(e)),e.on("input",(function(){n.val(e.val())})),n.on("blur keyup",(function(t){var i;"keyup"===t.type&&13!==t.keyCode||(!function(t){const e=t.attr("min"),n=t.attr("max"),i=t.val();return!(void 0!==e&&parseFloat(e)>parseFloat(i))&&!(void 0!==n&&parseFloat(n)<parseFloat(i))}(n)?(n.val(e.val()),(i=n).addClass("input-shake input-error"),i.one("animationend",(function(){i.removeClass("input-shake input-error")}))):e.val(n.val()).trigger("input").trigger("change"))}))}))},u=function(){if(_.isUndefined(e.config)||_.isUndefined(e.config.settings))return;t.fn.reactor.defaults.compliant=function(){t(this).slideDown(),t(this).find(":disabled").attr({disabled:!1})},t.fn.reactor.defaults.uncompliant=function(){t(this).slideUp(),t(this).find(":enabled").attr({disabled:!0})};let n=t.extend({},t.fn.reactor.helpers);const i=function(i,o,s){let a=null;if(_.isString(o))a=o;else if(_.isUndefined(o.id)){if(!_.isString(o[0]))return;a=o[0]}else a=o.id;let c=1,r=[0,1];const l=e.config.options_name+"["+a+"]",d=e.config.settings[l].type;_.isUndefined(o.value)?_.isUndefined(o[1])||_.isString(o[1])||(c=o[1]):c=o.value,_.isUndefined(o.between)||(r=o.between);const u='[data-customize-setting-link="'+e.config.options_name+"["+a+']"]';switch(d){case"checkbox":t(i).reactIf(u,(function(){return t(this).is(":checked")==c}));break;case"radio":case"sm_radio":case"sm_switch":case"radio_image":case"radio_html":_.isObject(c)?(c=_.toArray(c),t(i).reactIf(u,(function(){return-1!==c.indexOf(t(u+":checked").val())}))):t(i).reactIf(u,(function(){return t(u+":checked").val()==c}));break;case"range":const e=n.Between(r[0],r[1]);t(i).reactIf(u,e);break;default:_.isObject(c)?(c=_.toArray(c),t(i).reactIf(u,(function(){return-1!==c.indexOf(t(u).val())}))):t(i).reactIf(u,(function(){return t(u).val()==c}))}t(u).trigger("change"),t(".reactor").trigger("change.reactor")};t.each(e.config.settings,(function(e,n){let o=e.replace("[","-");if(o=o.replace("]",""),o="#customize-control-"+o+"_control",n.hasOwnProperty("show_if")){let e="AND";_.isUndefined(n.show_if.relation)||(e=n.show_if.relation,delete n.show_if.relation),_.isUndefined(n.show_if.id)?_.isObject(n.show_if)&&t.each(n.show_if,(function(t,e){i(o,e)})):i(o,n.show_if)}}))},f=function(e,n){const o=i(e),s=t('[data-customize-setting-link="'+e+'"]'),a=t(s).parent().attr("class");if(_.isUndefined(a)||"font-options__wrapper"!==a)o.set(n);else if(_.isString(n)){const e=s.parent().find('option[value="'+n+'"]');e.attr("selected","selected"),t(e).parents("select").data("touched",!0).trigger("change")}else if(_.isObject(n)){const t=s.parent().children(".font-options__options-list");t.length&&_.each(n,(function(e,n){let i=n;switch(n){case"font-family":i="font_family";break;case"font-size":i="font_size";break;case"font-weight":i="font_variant";break;case"letter-spacing":i="letter_spacing";break;case"text-transform":i="text_transform"}const o=t.find('[data-field="'+i+'"]');o.length&&o.val(e).trigger("change")}))}},h=function(){i.previewer.bind("synced",(function(){g(),i.previewedDevice.bind(g),o.on("resize",g)})),t(".collapse-sidebar").on("click",(function(){setTimeout(g,300)}))},g=function(){const e=t(".wp-full-overlay");if(e.find("iframe").css({width:"",height:"",transformOrigin:"",transform:""}),"desktop"!==i.previewedDevice.get())return;const n=e.width(),s=o.width(),a=o.height(),c=s/n;n>720&&n<1100&&e.find("iframe").css({width:n*c,height:a*c,transformOrigin:"left top",transform:"scale("+1/c+")"})},p=function(){"use strict";function e(e){let n=e.parents(".customize-control-custom_background:first");if(e.hasClass("customize-control-custom_background")&&(n=e),!(n.length>0))return;n=t(n[0]);const o=n.find(".button.background_upload_button").data("setting_id"),s=i.instance(o),a={};n.find(".customify_background_select, .customify_background_input").each((function(){let e=t(this).serializeArray()[0];e&&-1!==e.name.indexOf("[background-")&&(a[t(this).data("select_name")]=e.value)})),a.media={},a.media.id=n.find(".upload-id").val(),a.media.height=n.find(".upload-height").val(),a.media.width=n.find(".upload-width").val(),a.media.thumbnail=n.find(".upload-thumbnail").val(),s.set(a)}return{init:function(){t(".customize-control-custom_background .background_upload_button").unbind().on("click",(function(i){!function(i,o){let s;i.preventDefault();const a=t(this);if(s)return void s.open();s=n.media({multiple:!1,library:{},title:a.data("choose"),button:{text:a.data("update")}}),s.on("select",(function(){const t=s.state().get("selection").first();if(s.close(),"image"!==t.attributes.type)return;o.find(".customify_background_input.background-image").val(t.attributes.url),o.find(".upload").attr("value",t.attributes.url),o.find(".upload-id").attr("value",t.attributes.id),o.find(".upload-height").attr("value",t.attributes.height),o.find(".upload-width").attr("value",t.attributes.width);let n=t.attributes.url;if(_.isUndefined(t.attributes.sizes)||_.isUndefined(t.attributes.sizes.thumbnail))if(_.isUndefined(t.attributes.sizes))n=t.attributes.icon;else{let e=t.attributes.height;for(let i in t.attributes.sizes){const o=t.attributes.sizes[i];o.height<e&&(e=o.height,n=o.url)}}else n=t.attributes.sizes.thumbnail.url;o.find(".upload").hasClass("noPreview")||o.find(".preview_screenshot").empty().hide().append('<img class="preview_image" src="'+n+'">').slideDown("fast"),o.find(".remove-image").removeClass("hide"),o.find(".customify_background_select").removeClass("hide"),e(o)})),s.open()}(i,t(this).parents(".customize-control-custom_background:first"))})),t(".customize-control-custom_background .remove-image, .customize-control-custom_background .remove-file").unbind("click").on("click",(function(n){!function(t){const n=t.find(".upload_button_div");if(!n.find(".remove-image").addClass("hide"))return;n.find(".remove-image").addClass("hide"),t.find(".customify_background_select").addClass("hide"),t.find(".upload").val(null),t.find(".upload-id").val(null),t.find(".upload-height").val(null),t.find(".upload-width").val(null),t.find(".customify_background_input.background-image").val(null),t.find(".preview_screenshot").slideUp(),e(t)}(t(this).parents(".customize-control-custom_background:first"))}))}}}(jQuery),m=function(t){const e=[];let n;const i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(let t=0;t<i.length;t++)n=i[t].split("="),e.push(n[0]),e[n[0]]=n[1];return!_.isUndefined(e[t])&&e[t]}}(jQuery,customify,wp);