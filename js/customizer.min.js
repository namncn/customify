window.customify=window.customify||parent.customify||{},function(t,e,n){const i=n.customize,s=t(window),o=t(document);function a(n){n.preventDefault(),confirm("Do you really want to reset to defaults all the fields? Watch out, this will reset all your Customify options and will save them!")&&(t.each(i.settings.controls,(function(t,n){const i=t.replace("_control",""),s=e.config.settings[i];_.isUndefined(s)||_.isUndefined(s.default)||p(i,s.default)})),i.previewer.save())}function c(n){n.preventDefault();const s=t(this).data("panel"),o=i.panel(s),a=o.sections();confirm("Do you really want to reset "+o.params.title+"?")&&a.length>0&&t.each(a,(function(){const n=this.controls();n.length>0&&t.each(n,(function(t,n){const i=n.id.replace("_control",""),s=e.config.settings[i];_.isUndefined(s)||_.isUndefined(s.default)||p(i,s.default)}))}))}function r(n){n.preventDefault();const s=t(this).data("section"),o=i.section(s),a=o.controls();confirm("Do you really want to reset "+o.params.title+"?")&&a.length>0&&t.each(a,(function(t,n){const i=n.id.replace("_control",""),s=e.config.settings[i];_.isUndefined(s)||_.isUndefined(s.default)||p(i,s.default)}))}i.bind("ready",(function(){let n=null;void 0===e.connectedFieldsCallbacks&&(e.connectedFieldsCallbacks={}),t(".customify_ace_editor").each((function(e,i){const s=t(this).attr("id"),o=ace.edit(s),a=t(this).data("editor_type");o.setTheme("ace/theme/github"),o.getSession().setMode("ace/mode/"+a);const c=t("#"+s+"_textarea").hide();o.getSession().setValue(c.val()),o.getSession().on("change",(function(t){null!==n?(clearTimeout(n),n=null):n=setTimeout((function(){c.val(o.getSession().getValue()),c.trigger("change")}),1500)}))})),t(".customify_select2").select2(),setTimeout((function(){e.fontFields.init()}),333),f(),t(window).bind("keydown",(function(t){(t.ctrlKey||t.metaKey)&&"s"===String.fromCharCode(t.which).toLowerCase()&&(t.preventDefault(),i.previewer.save())})),t('.accordion-section-content[id*="'+e.config.options_name+'"], #sub-accordion-section-style_manager_section').each((function(){d(this)})),o.on("change",".customify_typography_font_subsets",(function(e){const n=t(this).parents(".options").siblings(".customify_typography").children(".customify_typography_values");let i=n.val();i=JSON.parse(decodeURIComponent(i)),i.selected_subsets=v(t(this).val()),n.val(encodeURIComponent(JSON.stringify(i))),n.trigger("change")})),o.on("change",".customify_typography_font_weight",(function(e){const n=t(this).parents(".options").siblings(".customify_typography").children(".customify_typography_values");let i=n.val();i=v(i),i.selected_variants={0:v(t(this).val())},n.val(encodeURIComponent(JSON.stringify(i))),n.trigger("change")})),t("body").on("customify:preset-change",(function(e){const n=t(e.target).data("options");_.isUndefined(n)||t.each(n,(function(t,e){p(t,e)}))})),o.on("change","select.js-customify-preset",(function(){const e=t(this);e.children('[value="'+e.val()+'"]').trigger("customify:preset-change")})),o.on("click",".js-customify-preset input",(function(){t(this).trigger("customify:preset-change")})),b.init(),w("save_customizer_once")&&i.previewer.save(),setTimeout((function(){u()}),1e3),t('button[data-action="reset_customify"]').length>0&&(t(".panel-meta").each((function(e,n){const i=t(n);let s=i.parents(".control-panel").attr("id");if(void 0!==s){s=s.replace("sub-accordion-panel-",""),s=s.replace("accordion-panel-","");const e=t('<li class="customize-control customize-control-reset"></li>');t('<button class="button js-reset-panel" data-panel="'+s+'"></button>').text("Panel's defaults").appendTo(e),i.parent().append(e)}})),t(".accordion-section-content").each((function(n,i){const s=t(this),o=s.attr("id");if(_.isUndefined(o)||-1===o.indexOf(e.config.options_name))return;const a=o.replace("sub-accordion-section-",""),c=t('<button class="button js-reset-section" data-section="'+a+'"></button>'),r=t('<li class="customize-control customize-control-reset"></li>');c.text("Reset All Options for This Section"),r.append(c),s.append(r)})),o.on("click",".js-reset-panel",c),o.on("click",".js-reset-section",r),o.on("click","#customize-control-reset_customify button",a)),t(".js-section-navigation").each((function(){const e=t(this),n=e.parents(".accordion-section-content").find(".customize-section-title"),i=e.closest(".customize-control");e.appendTo(n),n.parent().addClass("has-nav"),i.addClass("screen-reader-text")})),t(".js-section-navigation a").on("click",(function(e){e.preventDefault();const n=t(this),i=n.parents(".wp-full-overlay-sidebar-content"),s=n.parents(".accordion-section-content"),o=n.attr("href");if("#"!=o){const e=t("#customize-header-actions").outerHeight(),n=s.find(".customize-section-title").outerHeight(),a=t(o).position().top;i.animate({scrollTop:a-n-e},500)}})),function(){const e=t(".js-font-option-toggle");e.on("click",(function(){const n=t(this);!0===n.prop("checked")&&e.not(n).prop("checked",!1)}))}(),l(),h()}));const l=function(){_.each(i.settings.settings,(function(t,n){if(void 0!==e.colorPalettes&&void 0!==e.colorPalettes.masterSettingIds&&_.contains(e.colorPalettes.masterSettingIds,n))return;if(void 0!==e.fontPalettes&&void 0!==e.fontPalettes.masterSettingIds&&_.contains(e.fontPalettes.masterSettingIds,n))return;let s=i(n);void 0!==t.connected_fields&&(e.connectedFieldsCallbacks[n]=function(t,e){return function(e,n){_.each(t.connected_fields,(function(t){if(_.isUndefined(t)||_.isUndefined(t.setting_id)||!_.isString(t.setting_id))return;const n=i(t.setting_id);_.isUndefined(n)||n.set(e)}))}}(t),s.bind(e.connectedFieldsCallbacks[n]))}))},d=function(e){t(e).find('input[type="range"]').each((function(){let e=t(this),n=e.siblings(".range-value");n.length||(n=e.clone(),n.attr("type","number").attr("class","range-value").removeAttr("data-field"),e.first().attr("id")&&n.attr("id",e.first().attr("id")+"_number"),n.insertAfter(e)),e.on("input",(function(){n.val(e.val())})),n.on("blur keyup",(function(t){var i;"keyup"===t.type&&13!==t.keyCode||(!function(t){const e=t.attr("min"),n=t.attr("max"),i=t.val();return!(void 0!==e&&parseFloat(e)>parseFloat(i))&&!(void 0!==n&&parseFloat(n)<parseFloat(i))}(n)?(n.val(e.val()),(i=n).addClass("input-shake input-error"),i.one("animationend",(function(){i.removeClass("input-shake input-error")}))):e.val(n.val()).trigger("input").trigger("change"))}))}))},u=function(){if(_.isUndefined(e.config)||_.isUndefined(e.config.settings))return;t.fn.reactor.defaults.compliant=function(){t(this).slideDown(),t(this).find(":disabled").attr({disabled:!1})},t.fn.reactor.defaults.uncompliant=function(){t(this).slideUp(),t(this).find(":enabled").attr({disabled:!0})};let n=t.extend({},t.fn.reactor.helpers),i=function(i,s,o){let a=null;if(_.isString(s))a=s;else if(_.isUndefined(s.id)){if(!_.isString(s[0]))return;a=s[0]}else a=s.id;let c=1,r=[0,1];const l=e.config.options_name+"["+a+"]",d=e.config.settings[l].type;_.isUndefined(s.value)?_.isUndefined(s[1])||_.isString(s[1])||(c=s[1]):c=s.value,_.isUndefined(s.between)||(r=s.between);const u='[data-customize-setting-link="'+e.config.options_name+"["+a+']"]';switch(d){case"checkbox":t(i).reactIf(u,(function(){return t(this).is(":checked")==c}));break;case"radio":case"sm_radio":case"sm_switch":case"radio_image":case"radio_html":_.isObject(c)?(c=_.toArray(c),t(i).reactIf(u,(function(){return-1!==c.indexOf(t(u+":checked").val())}))):t(i).reactIf(u,(function(){return t(u+":checked").val()==c}));break;case"range":const e=n.Between(r[0],r[1]);t(i).reactIf(u,e);break;default:_.isObject(c)?(c=_.toArray(c),t(i).reactIf(u,(function(){return-1!==c.indexOf(t(u).val())}))):t(i).reactIf(u,(function(){return t(u).val()==c}))}t(u).trigger("change"),t(".reactor").trigger("change.reactor")};t.each(e.config.settings,(function(e,n){let s=e.replace("[","-");if(s=s.replace("]",""),s="#customize-control-"+s+"_control",n.hasOwnProperty("show_if")){let e="AND";_.isUndefined(n.show_if.relation)||(e=n.show_if.relation,delete n.show_if.relation),_.isUndefined(n.show_if.id)?_.isObject(n.show_if)&&t.each(n.show_if,(function(t,e){i(s,e)})):i(s,n.show_if)}}))},f=function(){t(".customify_typography_font_family").each((function(){const e=this,n=t(e).siblings(".customify_typography_values");t(e).on("change",(function(){g(e),n.trigger("change")})),g(e)}))},p=function(e,n){let s=i(e),o=t('[data-customize-setting-link="'+e+'"]'),a=t(o).parent().attr("class");if(_.isUndefined(a)||"customify_typography"!==a){if(_.isUndefined(a)||"font-options__wrapper"!==a)s.set(n);else if(_.isString(n)){let e=o.parent().find('option[value="'+n+'"]');e.attr("selected","selected"),t(e).parents("select").data("touched",!0).trigger("change")}else if(_.isObject(n)){let t=o.parent().children(".font-options__options-list");t.length&&_.each(n,(function(e,n){let i=n;switch(n){case"font-family":i="font_family";break;case"font-size":i="font_size";break;case"font-weight":i="selected_variants";break;case"letter-spacing":i="letter_spacing";break;case"text-transform":i="text_transform"}let s=t.find('[data-field="'+i+'"]');s.length&&s.val(e).trigger("change")}))}}else{let e=o.siblings("select");if(_.isString(n)){let i=e.find('option[value="'+n+'"]');t(i[0]).attr("selected","selected"),g(e)}else if(_.isObject(n)){let i=e.find('option[value="'+n.font_family+'"]');t(i[0]).attr("selected","selected"),g(i),setTimeout((function(){let e=o.parent().siblings(".options").find(".customify_typography_font_weight"),s=e.find('option[value="'+n.selected_variants+'"]');t(s[0]).attr("selected","selected"),g(i),e.trigger("change")}),300)}e.trigger("change")}},g=function(e){const n=t(e);let i=n.val(),s=n.siblings(".customify_typography_values"),o=s.attr("value");if("[object Object]"===o)o=s.data("default");else if(_.isString(o)&&!k(o)){o=o.split(",");let t={};_.isUndefined(o[0])||(t.font_family=o[0]),_.isUndefined(o[1])||(t.selected_variants=o[1]),o=JSON.stringify(t)}let a=n.parent().siblings("ul.options").find(".customify_typography_font_weight"),c=n.parent().siblings("ul.options").find(".customify_typography_font_subsets");try{o=JSON.parse(decodeURIComponent(o))}catch(t){_.isUndefined(n.data("bound_once"))&&(n.data("bound_once",!0),n.change(),a.change(),c.change())}let r=n.find(':not(optgroup[label=Recommended]) option[value="'+i+'"]');if(r.length<1&&(r=n.find('option[value="'+i+'"]')),r.length>0){let e=r.data("type"),l={type:e,font_family:i},d=null,u=null;if("std"==e?(d={0:"100",1:"200",3:"300",4:"400",5:"500",6:"600",7:"700",8:"800",9:"900"},_.isUndefined(t(r[0]).data("variants"))||(d=v(t(r[0]).data("variants")))):(d=v(t(r[0]).data("variants")),u=v(t(r[0]).data("subsets"))),_.isUndefined(d)||_.isNull(d)||_.isEmpty(d))_.isUndefined(a)||a.parent().hide();else{l.variants=d,l.selected_variants={0:d[0]};let e="",i=0;(Array.isArray(d)||_.isObject(d))&&t.each(d,(function(n,s){let a="";(_.isObject(o.selected_variants)&&y(s,o.selected_variants)||_.isString(o.selected_variants)&&s===o.selected_variants)&&(a=' selected="selected"');let c=s,r=s;_.isObject(s)&&(c=encodeURIComponent(JSON.stringify(s)),r="",_.isUndefined(s["font-weight"])||(r+=s["font-weight"]),_.isString(s["font-style"])&&t.inArray(s["font-style"].toLowerCase(),["normal","regular"])<0&&(r+=s["font-style"])),e+='<option value="'+c+'"'+a+">"+r+"</option>",i++})),_.isUndefined(a)||(a.html(e),i<2||!_.isUndefined(n.data("disabled"))?a.parent().hide():a.parent().show())}if(_.isUndefined(u)||_.isNull(u)||_.isEmpty(u))_.isUndefined(c)||c.parent().hide();else{l.subsets=u,l.selected_subsets={0:u[0]};let e="",n=0;t.each(u,(function(t,i){let s="";_.isObject(o.selected_subsets)&&y(i,o.selected_subsets)&&(s=' selected="selected"'),e+='<option value="'+i+'"'+s+">"+i+"</option>",n++})),_.isUndefined(c)||(c.html(e),n<=1?c.parent().hide():c.parent().show())}s.val(encodeURIComponent(JSON.stringify(l)))}},h=function(){i.previewer.bind("synced",(function(){m(),i.previewedDevice.bind(m),s.on("resize",m)})),t(".collapse-sidebar").on("click",(function(){setTimeout(m,300)}))},m=function(){const e=t(".wp-full-overlay");if(e.find("iframe").css({width:"",height:"",transformOrigin:"",transform:""}),"desktop"!==i.previewedDevice.get())return;const n=e.width(),o=s.width(),a=s.height(),c=o/n;n>720&&n<1100&&e.find("iframe").css({width:n*c,height:a*c,transformOrigin:"left top",transform:"scale("+1/c+")"})},b=function(){"use strict";function e(e){let n=e.parents(".customize-control-custom_background:first");if(e.hasClass("customize-control-custom_background")&&(n=e),!(n.length>0))return;if(n=t(n[0]),!n.find(".background-preview"))return;const s=n.find(".button.background_upload_button").data("setting_id"),o=i.instance(s);let a={};n.find(".customify_background_select, .customify_background_input").each((function(){let e=t(this).serializeArray();e=e[0],e&&-1!=e.name.indexOf("[background-")&&(a[t(this).data("select_name")]=e.value)})),o.set(a),i.trigger("change"),i.previewer.refresh()}return{init:function(){t(".customize-control-custom_background .remove-image, .customize-control-custom_background .remove-file").unbind("click").on("click",(function(n){return function(e){const n=e.find(".upload_button_div");if(!n.find(".remove-image").addClass("hide"))return;n.find(".remove-image").addClass("hide"),e.find(".customify_background_select").addClass("hide"),n.find(".upload").val(""),n.find(".upload-id").val(""),n.find(".upload-height").val(""),n.find(".upload-width").val(""),e.find(".customify_background_input.background-image").val("");let s=n.find(".background_upload_button").data("setting_id"),o=i.control(s+"_control"),a=o.setting(),c=e.find(".preview_screenshot"),r=t.map(a,(function(t,e){return[t]}));c.slideUp(),n.find(".remove-file").unbind(),r["background-image"]="",o.setting(r)}(t(this).parents(".customize-control-custom_background:first")),e(t(this)),!1})),t(".customize-control-custom_background .background_upload_button").unbind().on("click",(function(i){!function(i,s){let o;i.preventDefault();const a=t(this);if(o)return void o.open();o=n.media({multiple:!1,library:{},title:a.data("choose"),button:{text:a.data("update")}}),o.on("select",(function(){const t=o.state().get("selection").first();if(o.close(),"image"!==t.attributes.type)return;s.find(".upload").attr("value",t.attributes.url),s.find(".upload-id").attr("value",t.attributes.id),s.find(".upload-height").attr("value",t.attributes.height),s.find(".upload-width").attr("value",t.attributes.width);let n=t.attributes.url;if(_.isUndefined(t.attributes.sizes)||_.isUndefined(t.attributes.sizes.thumbnail))if(_.isUndefined(t.attributes.sizes))n=t.attributes.icon;else{let e=t.attributes.height;for(let i in t.attributes.sizes){const s=t.attributes.sizes[i];s.height<e&&(e=s.height,n=s.url)}}else n=t.attributes.sizes.thumbnail.url;s.find(".customify_background_input.background-image").val(t.attributes.url),s.find(".upload").hasClass("noPreview")||s.find(".preview_screenshot").empty().hide().append('<img class="preview_image" src="'+n+'">').slideDown("fast"),s.find(".remove-image").removeClass("hide"),s.find(".customify_background_select").removeClass("hide"),e(s)})),o.open()}(i,t(this).parents(".customize-control-custom_background:first"))})),t(".customify_background_select").on("change",(function(){e(t(this))}))}}}(jQuery),y=function(t,e){for(let n in e)if(e.hasOwnProperty(n)&&_.isEqual(e[n],t))return!0;return!1},v=function(t){let e;try{e=JSON.parse(decodeURIComponent(t))}catch(n){e=t}return e},w=function(t){let e,n=[];const i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(let t=0;t<i.length;t++)e=i[t].split("="),n.push(e[0]),n[e[0]]=e[1];return!_.isUndefined(n[t])&&n[t]},k=function(t){try{JSON.parse(t)}catch(t){return!1}return!0}}(jQuery,customify,wp);