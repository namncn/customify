window.customify=window.customify||parent.customify||{},function(t,e,n){const i=n.customize,o=t(window),s=t(document);function a(n){n.preventDefault(),confirm("Do you really want to reset to defaults all the fields? Watch out, this will reset all your Customify options and will save them!")&&(t.each(i.settings.controls,(function(t,n){const i=t.replace("_control",""),o=e.config.settings[i];_.isUndefined(o)||_.isUndefined(o.default)||p(i,o.default)})),i.previewer.save())}function c(n){n.preventDefault();const o=t(this).data("panel"),s=i.panel(o),a=s.sections();confirm("Do you really want to reset "+s.params.title+"?")&&a.length>0&&t.each(a,(function(){const n=this.controls();n.length>0&&t.each(n,(function(t,n){const i=n.id.replace("_control",""),o=e.config.settings[i];_.isUndefined(o)||_.isUndefined(o.default)||p(i,o.default)}))}))}function r(n){n.preventDefault();const o=t(this).data("section"),s=i.section(o),a=s.controls();confirm("Do you really want to reset "+s.params.title+"?")&&a.length>0&&t.each(a,(function(t,n){const i=n.id.replace("_control",""),o=e.config.settings[i];_.isUndefined(o)||_.isUndefined(o.default)||p(i,o.default)}))}i.bind("ready",(function(){let n=null;void 0===e.connectedFieldsCallbacks&&(e.connectedFieldsCallbacks={}),t(".customify_ace_editor").each((function(e,i){const o=t(this).attr("id"),s=ace.edit(o),a=t(this).data("editor_type");s.setTheme("ace/theme/github"),s.getSession().setMode("ace/mode/"+a);const c=t("#"+o+"_textarea").hide();s.getSession().setValue(c.val()),s.getSession().on("change",(function(t){null!==n?(clearTimeout(n),n=null):n=setTimeout((function(){c.val(s.getSession().getValue()),c.trigger("change")}),1500)}))})),t(".customify_select2").select2(),setTimeout((function(){e.fontFields.init()}),333),u(),t(window).bind("keydown",(function(t){(t.ctrlKey||t.metaKey)&&"s"===String.fromCharCode(t.which).toLowerCase()&&(t.preventDefault(),i.previewer.save())})),t('.accordion-section-content[id*="'+e.config.options_name+'"], #sub-accordion-section-style_manager_section').each((function(){d(this)})),s.on("change",".customify_typography_font_subsets",(function(e){const n=t(this).parents(".options").siblings(".customify_typography").children(".customify_typography_values");let i=n.val();i=JSON.parse(decodeURIComponent(i)),i.selected_subsets=y(t(this).val()),n.val(encodeURIComponent(JSON.stringify(i))),n.trigger("change")})),s.on("change",".customify_typography_font_weight",(function(e){const n=t(this).parents(".options").siblings(".customify_typography").children(".customify_typography_values");let i=n.val();i=y(i),i.font_variant=y(t(this).val()),n.val(encodeURIComponent(JSON.stringify(i))),n.trigger("change")})),t("body").on("customify:preset-change",(function(e){const n=t(e.target).data("options");_.isUndefined(n)||t.each(n,(function(t,e){p(t,e)}))})),s.on("change","select.js-customify-preset",(function(){const e=t(this);e.children('[value="'+e.val()+'"]').trigger("customify:preset-change")})),s.on("click",".js-customify-preset input",(function(){t(this).trigger("customify:preset-change")})),b.init(),v("save_customizer_once")&&i.previewer.save(),setTimeout((function(){f()}),1e3),t('button[data-action="reset_customify"]').length>0&&(t(".panel-meta").each((function(e,n){const i=t(n);let o=i.parents(".control-panel").attr("id");if(void 0!==o){o=o.replace("sub-accordion-panel-",""),o=o.replace("accordion-panel-","");const e=t('<li class="customize-control customize-control-reset"></li>');t('<button class="button js-reset-panel" data-panel="'+o+'"></button>').text("Panel's defaults").appendTo(e),i.parent().append(e)}})),t(".accordion-section-content").each((function(n,i){const o=t(this),s=o.attr("id");if(_.isUndefined(s)||-1===s.indexOf(e.config.options_name))return;const a=s.replace("sub-accordion-section-",""),c=t('<button class="button js-reset-section" data-section="'+a+'"></button>'),r=t('<li class="customize-control customize-control-reset"></li>');c.text("Reset All Options for This Section"),r.append(c),o.append(r)})),s.on("click",".js-reset-panel",c),s.on("click",".js-reset-section",r),s.on("click","#customize-control-reset_customify button",a)),t(".js-section-navigation").each((function(){const e=t(this),n=e.parents(".accordion-section-content").find(".customize-section-title"),i=e.closest(".customize-control");e.appendTo(n),n.parent().addClass("has-nav"),i.addClass("screen-reader-text")})),t(".js-section-navigation a").on("click",(function(e){e.preventDefault();const n=t(this),i=n.parents(".wp-full-overlay-sidebar-content"),o=n.parents(".accordion-section-content"),s=n.attr("href");if("#"!=s){const e=t("#customize-header-actions").outerHeight(),n=o.find(".customize-section-title").outerHeight(),a=t(s).position().top;i.animate({scrollTop:a-n-e},500)}})),function(){const e=t(".js-font-option-toggle");e.on("click",(function(){const n=t(this);!0===n.prop("checked")&&e.not(n).prop("checked",!1)}))}(),l(),h()}));const l=function(){_.each(i.settings.settings,(function(t,n){if(void 0!==e.colorPalettes&&void 0!==e.colorPalettes.masterSettingIds&&_.contains(e.colorPalettes.masterSettingIds,n))return;if(void 0!==e.fontPalettes&&void 0!==e.fontPalettes.masterSettingIds&&_.contains(e.fontPalettes.masterSettingIds,n))return;let o=i(n);void 0!==t.connected_fields&&(e.connectedFieldsCallbacks[n]=function(t,e){return function(e,n){_.each(t.connected_fields,(function(t){if(_.isUndefined(t)||_.isUndefined(t.setting_id)||!_.isString(t.setting_id))return;const n=i(t.setting_id);_.isUndefined(n)||n.set(e)}))}}(t),o.bind(e.connectedFieldsCallbacks[n]))}))},d=function(e){t(e).find('input[type="range"]').each((function(){let e=t(this),n=e.siblings(".range-value");n.length||(n=e.clone(),n.attr("type","number").attr("class","range-value").removeAttr("data-field"),e.first().attr("id")&&n.attr("id",e.first().attr("id")+"_number"),n.insertAfter(e)),e.on("input",(function(){n.val(e.val())})),n.on("blur keyup",(function(t){var i;"keyup"===t.type&&13!==t.keyCode||(!function(t){const e=t.attr("min"),n=t.attr("max"),i=t.val();return!(void 0!==e&&parseFloat(e)>parseFloat(i))&&!(void 0!==n&&parseFloat(n)<parseFloat(i))}(n)?(n.val(e.val()),(i=n).addClass("input-shake input-error"),i.one("animationend",(function(){i.removeClass("input-shake input-error")}))):e.val(n.val()).trigger("input").trigger("change"))}))}))},f=function(){if(_.isUndefined(e.config)||_.isUndefined(e.config.settings))return;t.fn.reactor.defaults.compliant=function(){t(this).slideDown(),t(this).find(":disabled").attr({disabled:!1})},t.fn.reactor.defaults.uncompliant=function(){t(this).slideUp(),t(this).find(":enabled").attr({disabled:!0})};let n=t.extend({},t.fn.reactor.helpers),i=function(i,o,s){let a=null;if(_.isString(o))a=o;else if(_.isUndefined(o.id)){if(!_.isString(o[0]))return;a=o[0]}else a=o.id;let c=1,r=[0,1];const l=e.config.options_name+"["+a+"]",d=e.config.settings[l].type;_.isUndefined(o.value)?_.isUndefined(o[1])||_.isString(o[1])||(c=o[1]):c=o.value,_.isUndefined(o.between)||(r=o.between);const f='[data-customize-setting-link="'+e.config.options_name+"["+a+']"]';switch(d){case"checkbox":t(i).reactIf(f,(function(){return t(this).is(":checked")==c}));break;case"radio":case"sm_radio":case"sm_switch":case"radio_image":case"radio_html":_.isObject(c)?(c=_.toArray(c),t(i).reactIf(f,(function(){return-1!==c.indexOf(t(f+":checked").val())}))):t(i).reactIf(f,(function(){return t(f+":checked").val()==c}));break;case"range":const e=n.Between(r[0],r[1]);t(i).reactIf(f,e);break;default:_.isObject(c)?(c=_.toArray(c),t(i).reactIf(f,(function(){return-1!==c.indexOf(t(f).val())}))):t(i).reactIf(f,(function(){return t(f).val()==c}))}t(f).trigger("change"),t(".reactor").trigger("change.reactor")};t.each(e.config.settings,(function(e,n){let o=e.replace("[","-");if(o=o.replace("]",""),o="#customize-control-"+o+"_control",n.hasOwnProperty("show_if")){let e="AND";_.isUndefined(n.show_if.relation)||(e=n.show_if.relation,delete n.show_if.relation),_.isUndefined(n.show_if.id)?_.isObject(n.show_if)&&t.each(n.show_if,(function(t,e){i(o,e)})):i(o,n.show_if)}}))},u=function(){t(".customify_typography_font_family").each((function(){const e=this,n=t(e).siblings(".customify_typography_values");t(e).on("change",(function(){g(e),n.trigger("change")})),g(e)}))},p=function(e,n){let o=i(e),s=t('[data-customize-setting-link="'+e+'"]'),a=t(s).parent().attr("class");if(_.isUndefined(a)||"customify_typography"!==a){if(_.isUndefined(a)||"font-options__wrapper"!==a)o.set(n);else if(_.isString(n)){let e=s.parent().find('option[value="'+n+'"]');e.attr("selected","selected"),t(e).parents("select").data("touched",!0).trigger("change")}else if(_.isObject(n)){let t=s.parent().children(".font-options__options-list");t.length&&_.each(n,(function(e,n){let i=n;switch(n){case"font-family":i="font_family";break;case"font-size":i="font_size";break;case"font-weight":i="font_variant";break;case"letter-spacing":i="letter_spacing";break;case"text-transform":i="text_transform"}let o=t.find('[data-field="'+i+'"]');o.length&&o.val(e).trigger("change")}))}}else{let e=s.siblings("select");if(_.isString(n)){let i=e.find('option[value="'+n+'"]');t(i[0]).attr("selected","selected"),g(e)}else if(_.isObject(n)){let i=e.find('option[value="'+n.font_family+'"]');t(i[0]).attr("selected","selected"),g(i),setTimeout((function(){let e=s.parent().siblings(".options").find(".customify_typography_font_weight"),o=e.find('option[value="'+n.font_variant+'"]');t(o[0]).attr("selected","selected"),g(i),e.trigger("change")}),300)}e.trigger("change")}},g=function(n){const i=t(n);let o=i.val(),s=i.siblings(".customify_typography_values"),a=s.attr("value");const c=e.fontFields.determineFontType(o),r=e.fontFields.getFontDetails(o,c);if("[object Object]"===a)a=s.data("default");else if(_.isString(a)&&(a=decodeURIComponent(a),!w(a))){a=a.split(",");let t={};_.isUndefined(a[0])||(t.font_family=a[0]),_.isUndefined(a[1])||(t.font_variant=a[1]),a=JSON.stringify(t)}let l=i.parent().siblings("ul.options").find(".customify_typography_font_weight"),d=i.parent().siblings("ul.options").find(".customify_typography_font_subsets");try{a=JSON.parse(decodeURIComponent(a))}catch(t){_.isUndefined(i.data("bound_once"))&&(i.data("bound_once",!0),i.trigger("change"),l.trigger("change"),d.trigger("change"))}let f=i.find(':not(optgroup[label=Recommended]) option[value="'+o+'"]');if(f.length<1&&(f=i.find('option[value="'+o+'"]')),f.length>0){let e={type:c,font_family:o},n=null,f=null;if("std_font"==c?(n={0:"100",1:"200",3:"300",4:"400",5:"500",6:"600",7:"700",8:"800",9:"900"},_.isUndefined(r.variants)||(n=r.variants)):(n=void 0!==r.variants?r.variants:[],f=void 0!==r.subsets?r.subsets:[]),_.isNull(n)||_.isEmpty(n))_.isUndefined(l)||l.parent().hide();else{let o="",s=0;(Array.isArray(n)||_.isObject(n))&&t.each(n,(function(n,i){let c="";i===a.font_variant&&(c=' selected="selected"',e.font_variant=i);let r=i,l=i;_.isObject(i)&&(r=encodeURIComponent(JSON.stringify(i)),l="",_.isUndefined(i["font-weight"])||(l+=i["font-weight"]),_.isString(i["font-style"])&&t.inArray(i["font-style"].toLowerCase(),["normal","regular"])<0&&(l+=i["font-style"])),o+='<option value="'+r+'"'+c+">"+l+"</option>",s++})),_.isUndefined(l)||(l.html(o),s<2||!_.isUndefined(i.data("disabled"))?l.parent().hide():l.parent().show())}if(_.isNull(f)||_.isEmpty(f))_.isUndefined(d)||d.parent().hide();else{e.selected_subsets=[];let n=[];_.isUndefined(a.selected_subsets)||_.isEmpty(a.selected_subsets)||(n=a.selected_subsets,Array.isArray(n)||(n=Object.keys(n).map((function(t){return n[t]}))));let i="",o=0;t.each(f,(function(t,s){if("latin"===s)return;let a="";-1!==n.indexOf(s)&&(a=' selected="selected"',e.selected_subsets.push(s)),i+='<option value="'+s+'"'+a+">"+s+"</option>",o++})),_.isUndefined(d)||(d.html(i),o<=1?d.parent().hide():d.parent().show())}s.val(encodeURIComponent(JSON.stringify(e)))}},h=function(){i.previewer.bind("synced",(function(){m(),i.previewedDevice.bind(m),o.on("resize",m)})),t(".collapse-sidebar").on("click",(function(){setTimeout(m,300)}))},m=function(){const e=t(".wp-full-overlay");if(e.find("iframe").css({width:"",height:"",transformOrigin:"",transform:""}),"desktop"!==i.previewedDevice.get())return;const n=e.width(),s=o.width(),a=o.height(),c=s/n;n>720&&n<1100&&e.find("iframe").css({width:n*c,height:a*c,transformOrigin:"left top",transform:"scale("+1/c+")"})},b=function(){"use strict";function e(e){let n=e.parents(".customize-control-custom_background:first");if(e.hasClass("customize-control-custom_background")&&(n=e),!(n.length>0))return;if(n=t(n[0]),!n.find(".background-preview"))return;const o=n.find(".button.background_upload_button").data("setting_id"),s=i.instance(o);let a={};n.find(".customify_background_select, .customify_background_input").each((function(){let e=t(this).serializeArray();e=e[0],e&&-1!=e.name.indexOf("[background-")&&(a[t(this).data("select_name")]=e.value)})),s.set(a),i.trigger("change"),i.previewer.refresh()}return{init:function(){t(".customize-control-custom_background .remove-image, .customize-control-custom_background .remove-file").unbind("click").on("click",(function(n){return function(e){const n=e.find(".upload_button_div");if(!n.find(".remove-image").addClass("hide"))return;n.find(".remove-image").addClass("hide"),e.find(".customify_background_select").addClass("hide"),n.find(".upload").val(""),n.find(".upload-id").val(""),n.find(".upload-height").val(""),n.find(".upload-width").val(""),e.find(".customify_background_input.background-image").val("");let o=n.find(".background_upload_button").data("setting_id"),s=i.control(o+"_control"),a=s.setting(),c=e.find(".preview_screenshot"),r=t.map(a,(function(t,e){return[t]}));c.slideUp(),n.find(".remove-file").unbind(),r["background-image"]="",s.setting(r)}(t(this).parents(".customize-control-custom_background:first")),e(t(this)),!1})),t(".customize-control-custom_background .background_upload_button").unbind().on("click",(function(i){!function(i,o){let s;i.preventDefault();const a=t(this);if(s)return void s.open();s=n.media({multiple:!1,library:{},title:a.data("choose"),button:{text:a.data("update")}}),s.on("select",(function(){const t=s.state().get("selection").first();if(s.close(),"image"!==t.attributes.type)return;o.find(".upload").attr("value",t.attributes.url),o.find(".upload-id").attr("value",t.attributes.id),o.find(".upload-height").attr("value",t.attributes.height),o.find(".upload-width").attr("value",t.attributes.width);let n=t.attributes.url;if(_.isUndefined(t.attributes.sizes)||_.isUndefined(t.attributes.sizes.thumbnail))if(_.isUndefined(t.attributes.sizes))n=t.attributes.icon;else{let e=t.attributes.height;for(let i in t.attributes.sizes){const o=t.attributes.sizes[i];o.height<e&&(e=o.height,n=o.url)}}else n=t.attributes.sizes.thumbnail.url;o.find(".customify_background_input.background-image").val(t.attributes.url),o.find(".upload").hasClass("noPreview")||o.find(".preview_screenshot").empty().hide().append('<img class="preview_image" src="'+n+'">').slideDown("fast"),o.find(".remove-image").removeClass("hide"),o.find(".customify_background_select").removeClass("hide"),e(o)})),s.open()}(i,t(this).parents(".customize-control-custom_background:first"))})),t(".customify_background_select").on("change",(function(){e(t(this))}))}}}(jQuery),y=function(t){let e;try{e=JSON.parse(decodeURIComponent(t))}catch(n){e=t}return e},v=function(t){let e,n=[];const i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(let t=0;t<i.length;t++)e=i[t].split("="),n.push(e[0]),n[e[0]]=e[1];return!_.isUndefined(n[t])&&n[t]},w=function(t){try{JSON.parse(t)}catch(t){return!1}return!0}}(jQuery,customify,wp);