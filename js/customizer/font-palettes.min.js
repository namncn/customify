window.customify=window.customify||{},function(t,e,n,i){e.fontPalettes=function(){const s=n.customize;let o;const f=["sm_font_primary","sm_font_secondary","sm_font_body","sm_font_accent"],l=function(){_.each(f,(function(t){if(void 0!==o[t]){let n=o[t],i=s(t);void 0!==n.connected_fields&&(e.fontsConnectedFieldsCallbacks[t]=function(t,n){return function(n,i){_.each(t.connected_fields,(function(n){if(_.isUndefined(n)||_.isUndefined(n.setting_id)||!_.isString(n.setting_id)||_.isUndefined(t.fonts_logic))return;let i=s(n.setting_id);if(_.isUndefined(i))return;let o,f={},l=t.fonts_logic;if(void 0!==l.reset){let t=n.setting_id,s=e.config.settings[t].default;_.isUndefined(i)||_.isEmpty(s)||(f.font_family=s.font_family,f.font_size=s.font_size,f.line_height=s.line_height,f.letter_spacing=s.letter_spacing,f.text_transform=s.text_transform,f.selected_variants=s.selected_variants)}if(void 0!==l.font_family&&(f.font_family=l.font_family),!_.isEmpty(f.font_family)){if(f.type=e.fontFields.determineFontType(f.font_family),void 0!==l.font_weights&&(f.variants=l.font_weights),void 0!==n.font_size&&!1!==n.font_size){if(f.font_size=n.font_size,void 0!==l.font_styles_intervals&&_.isArray(l.font_styles_intervals)&&l.font_styles_intervals.length>0){let t=0;for(;t<l.font_styles_intervals.length-1&&void 0!==l.font_styles_intervals[t].end&&l.font_styles_intervals[t].end<=n.font_size.value;)t++;_.isEmpty(l.font_styles_intervals[t].font_weight)||(f.selected_variants=l.font_styles_intervals[t].font_weight),_.isEmpty(l.font_styles_intervals[t].letter_spacing)||(f.letter_spacing=l.font_styles_intervals[t].letter_spacing),_.isEmpty(l.font_styles_intervals[t].text_transform)||(f.text_transform=l.font_styles_intervals[t].text_transform)}if(void 0!==l.font_size_to_line_height_points&&_.isArray(l.font_size_to_line_height_points)){let t=regression.logarithmic(l.font_size_to_line_height_points,{precision:2}),e=n.font_size.value,i=t.predict(e)[1];f.line_height={value:i}}}o=e.fontFields.encodeValues(f),i.set(o)}}))}}(n),i.bind(e.fontsConnectedFieldsCallbacks[t]))}}))},d=()=>{_.each(f,(function(t){if(void 0!==o[t]){let n=o[t],i=s(t);void 0!==n.connected_fields&&void 0!==e.fontsConnectedFieldsCallbacks[t]&&i.unbind(e.fontsConnectedFieldsCallbacks[t]),delete e.fontsConnectedFieldsCallbacks[t]}})),l()},a=function(){let e=t(this).data("fonts_logic");_.isUndefined(e)||t.each(e,(function(t,e){c(t,e)})),t(this).trigger("customify:preset-change")},c=function(t,n){o[t].fonts_logic=n;let i=s(t);if(_.isUndefined(i))return;let f=e.fontFields.encodeValues(n);i.set(f)};return s.bind("ready",()=>{o=s.settings.settings,void 0===e.settingsClone&&(e.settingsClone=t.extend(!0,{},o)),void 0===e.fontsConnectedFieldsCallbacks&&(e.fontsConnectedFieldsCallbacks={}),d(),t(i).on("click",".js-font-palette input",a)}),{masterSettingIds:f}}()}(jQuery,customify,wp,document);