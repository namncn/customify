window.customify=window.customify||parent.customify||{},function(t,e,n,i){void 0===e.fontPalettes&&(e.fontPalettes={}),_.extend(e.fontPalettes,function(){const s=n.customize;let o;const l=function(){_.each(e.fontPalettes.masterSettingIds,(function(t){if(void 0!==o[t]){const n=o[t],i=s(t);void 0!==n.connected_fields&&(e.fontPalettes.connectedFieldsCallbacks[t]=function(t,n){return function(n,i){_.each(t.connected_fields,(function(n){if(_.isUndefined(n)||_.isUndefined(n.setting_id)||!_.isString(n.setting_id)||_.isUndefined(t.fonts_logic))return;const i=s(n.setting_id);if(_.isUndefined(i))return;const o={},l=t.fonts_logic;if(void 0!==l.reset){const t=n.setting_id,s=e.config.settings[t].default;_.isUndefined(i)||_.isEmpty(s)||(o.font_family=s.font_family,o.font_size=s.font_size,o.line_height=s.line_height,o.letter_spacing=s.letter_spacing,o.text_transform=s.text_transform,o.font_variant=s.font_variant)}if(void 0!==l.font_family&&(o.font_family=l.font_family),!_.isEmpty(o.font_family)){if(void 0!==n.font_size&&!1!==n.font_size){if(o.font_size=e.fontFields.standardizeNumericalValue(n.font_size),void 0!==l.font_styles_intervals&&_.isArray(l.font_styles_intervals)&&l.font_styles_intervals.length>0){let t=0;for(;t<l.font_styles_intervals.length-1&&void 0!==l.font_styles_intervals[t].end&&l.font_styles_intervals[t].end<=n.font_size.value;)t++;_.isEmpty(l.font_styles_intervals[t].font_weight)||(o.font_variant=l.font_styles_intervals[t].font_weight),_.isEmpty(l.font_styles_intervals[t].letter_spacing)||(o.letter_spacing=e.fontFields.standardizeNumericalValue(l.font_styles_intervals[t].letter_spacing)),_.isEmpty(l.font_styles_intervals[t].text_transform)||(o.text_transform=l.font_styles_intervals[t].text_transform)}if(void 0!==l.font_size_to_line_height_points&&_.isArray(l.font_size_to_line_height_points)){const t=regression.logarithmic(l.font_size_to_line_height_points,{precision:2}).predict(o.font_size.value)[1];o.line_height=e.fontFields.standardizeNumericalValue(t)}}i.set(e.fontFields.encodeValues(o))}}))}}(n),i.bind(e.fontPalettes.connectedFieldsCallbacks[t]))}}))},f=()=>{_.each(e.fontPalettes.masterSettingIds,(function(t){if(void 0!==o[t]){const n=o[t],i=s(t);void 0!==n.connected_fields&&void 0!==e.fontPalettes.connectedFieldsCallbacks[t]&&i.unbind(e.fontPalettes.connectedFieldsCallbacks[t]),delete e.fontPalettes.connectedFieldsCallbacks[t]}})),l()},a=function(){const e=t(this).data("fonts_logic");_.isUndefined(e)||t.each(e,(function(t,e){d(t,e)})),t(this).trigger("customify:preset-change")},d=function(t,n){o[t].fonts_logic=n;const i=s(t);if(_.isUndefined(i))return;const l=e.fontFields.encodeValues(n);i.set(l)};return s.bind("ready",()=>{o=s.settings.settings,void 0===e.settingsClone&&(e.settingsClone=t.extend(!0,{},o)),void 0===e.fontPalettes.connectedFieldsCallbacks&&(e.fontPalettes.connectedFieldsCallbacks={}),f(),t(i).on("click",".js-font-palette input",a)}),{}}())}(jQuery,customify,wp,document);