window.customify=window.customify||{},function(t,n,e,i){n.fontPalettes=function(){const s=e.customize;let o;const f=["sm_font_primary","sm_font_secondary","sm_font_body","sm_font_accent"],l=function(){_.each(f,(function(t){if(void 0!==o[t]){const e=o[t],i=s(t);void 0!==e.connected_fields&&(n.fontsConnectedFieldsCallbacks[t]=function(t,e){return function(e,i){_.each(t.connected_fields,(function(e){if(_.isUndefined(e)||_.isUndefined(e.setting_id)||!_.isString(e.setting_id)||_.isUndefined(t.fonts_logic))return;const i=s(e.setting_id);if(_.isUndefined(i))return;const o={},f=t.fonts_logic;if(void 0!==f.reset){const t=e.setting_id,s=n.config.settings[t].default;_.isUndefined(i)||_.isEmpty(s)||(o.font_family=s.font_family,o.font_size=s.font_size,o.line_height=s.line_height,o.letter_spacing=s.letter_spacing,o.text_transform=s.text_transform,o.font_variant=s.font_variant)}if(void 0!==f.font_family&&(o.font_family=f.font_family),_.isEmpty(o.font_family))return;if(o.type=n.fontFields.determineFontType(o.font_family),void 0!==f.font_weights&&(o.variants=f.font_weights),void 0!==e.font_size&&!1!==e.font_size){if(o.font_size=e.font_size,void 0!==f.font_styles_intervals&&_.isArray(f.font_styles_intervals)&&f.font_styles_intervals.length>0){let t=0;for(;t<f.font_styles_intervals.length-1&&void 0!==f.font_styles_intervals[t].end&&f.font_styles_intervals[t].end<=e.font_size.value;)t++;_.isEmpty(f.font_styles_intervals[t].font_weight)||(o.font_variant=f.font_styles_intervals[t].font_weight),_.isEmpty(f.font_styles_intervals[t].letter_spacing)||(o.letter_spacing=f.font_styles_intervals[t].letter_spacing),_.isEmpty(f.font_styles_intervals[t].text_transform)||(o.text_transform=f.font_styles_intervals[t].text_transform)}if(void 0!==f.font_size_to_line_height_points&&_.isArray(f.font_size_to_line_height_points)){const t=regression.logarithmic(f.font_size_to_line_height_points,{precision:2}),n=e.font_size.value,i=t.predict(n)[1];o.line_height={value:i}}}const l=n.fontFields.encodeValues(o);i.set(l)}))}}(e),i.bind(n.fontsConnectedFieldsCallbacks[t]))}}))},d=()=>{_.each(f,(function(t){if(void 0!==o[t]){const e=o[t],i=s(t);void 0!==e.connected_fields&&void 0!==n.fontsConnectedFieldsCallbacks[t]&&i.unbind(n.fontsConnectedFieldsCallbacks[t]),delete n.fontsConnectedFieldsCallbacks[t]}})),l()},a=function(){const n=t(this).data("fonts_logic");_.isUndefined(n)||t.each(n,(function(t,n){c(t,n)})),t(this).trigger("customify:preset-change")},c=function(t,e){o[t].fonts_logic=e;const i=s(t);if(_.isUndefined(i))return;const f=n.fontFields.encodeValues(e);i.set(f)};return s.bind("ready",()=>{o=s.settings.settings,void 0===n.settingsClone&&(n.settingsClone=t.extend(!0,{},o)),void 0===n.fontsConnectedFieldsCallbacks&&(n.fontsConnectedFieldsCallbacks={}),d(),t(i).on("click",".js-font-palette input",a)}),{masterSettingIds:f}}()}(jQuery,customify,wp,document);