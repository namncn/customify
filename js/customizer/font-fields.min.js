window.customify=window.customify||parent.customify||{},function(t,e,n){void 0===e.fontFields&&(e.fontFields={}),_.extend(e.fontFields,function(){const s=".font-options__wrapper";let i,o,a;const l=n.customize,c={},d={};function u(e,n=!1,i=""){if(e.length&&(t(e).data("touched",!1),t(e).on("input change",(function(e,n){if(void 0!==n&&"customify"===n);else{t(e.target).data("touched",!0);const n=t(e.target).closest(s);r(n)}})),!0===n)){const n={};_.isEmpty(i)||(n.placeholder=i),t(e).select2(n)}}const f=function(){const e=t(".js-font-option-toggle");e.on("click",(function(){const n=t(this);!0===n.prop("checked")&&e.not(n).prop("checked",!1)}))};const r=function(e){const n=e.find(".customify_font_values").first(),s=n.data("customize-setting-link");if(!0===c[s])return;if(!0===d[s])return;c[s]=!0;const i=e.find(".font-options__options-list").find("[data-field]"),o=v(n.val()),a=l(s),u=_.isEmpty(o)?{}:o;i.each((function(e,n){const s=t(n),i=s.data("field");let o=s.val();if(!_.isUndefined(i)&&!s.data("disabled")&&(s.data("touched")||_.isUndefined(u[i]))){if("font_family"===i){const e=t(n.options[n.selectedIndex]).data("src");u.src=e||void 0}_.isUndefined(o)||_.isNull(o)||""===o?u[i]=void 0:(_.includes(["letter_spacing","line_height","font_size"],i)&&(o=h(o,n,!1)),u[i]=o)}})),u.variants=void 0,u.subsets=void 0;const f=y(u.font_family);void 0!==u.font_variant&&void 0!==f.variants&&Object.keys(f.variants).length>0&&_.includes(f.variants,u.font_variant)||(u.font_variant=void 0),void 0!==u.selected_subsets&&void 0!==f.subsets&&Object.keys(f.subsets).length>0?u.selected_subsets=_.intersection(u.selected_subsets,f.subsets):u.selected_subsets=void 0;const r=p(u);r!==n.val()&&(n.val(r),a.set(r)),c[s]=!1};const v=function(t){let e;try{e=JSON.parse(decodeURIComponent(t))}catch(n){e=t}return e},p=function(t){return encodeURIComponent(JSON.stringify(t))},h=function(e,n=!1,s=!0){const i={value:!1,unit:!1};if(_.includes(["","false",!1],e))return i;if(isNaN(e)){if(void 0!==e.value)i.value=e.value,void 0!==e.unit&&(i.unit=e.unit);else if(void 0!==e[0])i.value=e[0],void 0!==e[1]&&(i.unit=e[1]);else if("string"==typeof e){const t=e.match(/^([\d.\-+]+)(.+)/i);null!==t&&void 0!==t[1]?(i.value=t[1],_.isEmpty(t[2])||(i.unit=t[2])):i.value=e}}else i.value=e;if(!1!==n&&(!1===i.unit||_.isEmpty(i.unit))){let e="";const o=t(n);s?_.isEmpty(o.data("value_unit"))?_.isEmpty(o.data("unit"))||(e=o.data("unit")):e=o.data("value_unit"):_.isEmpty(o.data("unit"))?_.isEmpty(o.data("value_unit"))||(e=o.data("value_unit")):e=o.data("unit"),i.unit=e}return i},m=function(t){let n="std_font";return void 0!==e.fonts.theme_fonts[t]?n="theme_font":void 0!==e.fonts.cloud_fonts[t]?n="cloud_font":void 0!==e.fonts.google_fonts[t]&&(n="google_font"),n},y=function(t,n=!1){switch(!1===n&&(n=m(t)),n){case"theme_font":return e.fonts.theme_fonts[t];case"cloud_font":return e.fonts.cloud_fonts[t];case"google_font":return e.fonts.google_fonts[t];case"std_font":if(void 0!==e.fonts.std_fonts[t])return e.fonts.std_fonts[t]}return!1};return{init:function(){i=e.l10n.fonts.familyPlaceholderText,o=e.l10n.fonts.variantAutoText,a=e.l10n.fonts.subsetPlaceholderText;const n=t(".customify_font_family");void 0!==l.settings.google_fonts_opts&&n.each((function(e,n){const s=t(n).find(".google-fonts-opts-placeholder").first();if(s){s.replaceWith(l.settings.google_fonts_opts);const e=t(n).data("active_font_family");void 0!==e&&t(n).val(e)}})),n.select2({placeholder:i}),n.on("change",(function(e,n){const i=e.target.value,l=t(e.target).closest(s),c=y(i);!function(e,n){const s=n.find(".font-options__head .font-options__font-title");let i=e.family;void 0!==e.family_display&&(i=e.family_display);t(s).html(i)}(c,l),function(e,n){const s=void 0!==e.variants?e.variants:[],i=n.find(".customify_font_weight"),a=i.val()?i.val():"",l=[];i.val(null).empty(),i.hasClass("select2-hidden-accessible")&&i.select2("destroy");if(i.data("touched",!1),void 0===s||Object.keys(s).length<2)return i.parent().hide(),i.parent().prev("label").hide(),void i.data("disabled",!0);l.push({id:"",text:o}),t.each(s,(function(t,e){let n={id:e,text:e};a==e&&(n.selected=!0),l.push(n)})),i.select2({data:l}),i.parent().show(),i.parent().prev("label").show(),i.data("disabled",!1)}(c,l),function(e,n){const s=void 0!==e.subsets?e.subsets:[],i=n.find(".customify_font_subsets"),o=[];i.val(null).empty(),i.hasClass("select2-hidden-accessible")&&i.select2("destroy");if(i.data("touched",!1),void 0===s||Object.keys(s).length<2)return i.parent().hide(),i.parent().prev("label").hide(),void i.data("disabled",!0);const l=v(n.children(".customify_font_values").val());let c=[];_.isUndefined(l.selected_subsets)||_.isEmpty(l.selected_subsets)||(c=l.selected_subsets,Array.isArray(c)||(c=Object.keys(c).map((function(t){return c[t]}))));t.each(s,(function(t,e){if("latin"===e)return;const n={id:e,text:e};-1!==c.indexOf(e)&&(n.selected=!0),o.push(n)})),i.select2({data:o,placeholder:a}),i.parent().show(),i.parent().prev("label").show(),i.data("disabled",!1)}(c,l),void 0!==n&&"customify"===n||(t(e.target).data("touched",!0),r(l))})),n.each((function(e,n){const i=t(n).closest(s),o=i.children(".customify_font_values"),a=t(o).data("customize-setting-link");l(a).bind((function(e,n){c[this.id]||(o.val(e),function(e){const n=e.find(".customify_font_values").first(),s=n.data("customize-setting-link");if(!0===d[s])return;d[s]=!0;const i=t(e).find(".font-options__options-list").find("[data-field]"),o=v(n.val());i.each((function(e,n){const s=t(n),i=s.data("field");if(void 0!==i&&""!==i&&void 0!==o[i]){if(_.includes(["letter_spacing","line_height","font_size"],i)){const t=h(o[i],n);""!==t.unit&&(s.data("value_unit",t.unit),_.isEmpty(s.attr("unit"))&&s.attr("unit",t.unit));const e=16,a=s.attr("unit").trim().toLowerCase(),l=s.data("value_unit").trim().toLowerCase();a!=l&&(_.includes(["em","rem"],l)&&"px"===a?t.value=t.value*e:_.includes(["em","rem"],a)&&"px"===l&&(t.value=t.value/e)),s.attr("min")&&s.attr("min")>t.value&&s.attr("min",t.value),s.attr("max")&&s.attr("max")<t.value&&s.attr("max",t.value),s.val(t.value)}else s.val(o[i]);s.data("touched",!1),s.trigger("change",["customify"])}})),d[s]=!1}(i))}))})),u(t(".customify_font_weight"),!0),u(t(".customify_font_subsets"),!0,a),u(n.parents(s).find("select").not("select[class*=' select2'],select[class^='select2']"),!1),u(n.parents(s).find("input[type=range]"),!1),f()},selfUpdateValue:r,encodeValues:p,standardizeNumericalValue:h,determineFontType:m,getFontDetails:y,convertFontVariantToFVD:function(t){let e,n="n";switch(-1!==(t=String(t)).indexOf("italic")?(n="i",t=t.replace("italic","")):-1!==t.indexOf("oblique")&&(n="o",t=t.replace("oblique","")),t){case"100":e="1";break;case"200":e="2";break;case"300":e="3";break;case"500":e="5";break;case"600":e="6";break;case"700":case"bold":e="7";break;case"800":e="8";break;case"900":e="9";break;default:e="4"}return n+e}}}())}(jQuery,customify,wp);