window.customify=window.customify||parent.customify||{},function(t,e,n){void 0===e.fontFields&&(e.fontFields={}),_.extend(e.fontFields,function(){const s=".font-options__wrapper";let i,o,a;const l=n.customize,c={},u={};function d(e,n=!1,i=""){if(e.length&&(t(e).data("touched",!1),t(e).on("change",(function(e){const n=t(e.target).closest(s);f(n)})).on("input",(function(e){t(e.target).data("touched",!0)})),!0===n)){const n={};_.isEmpty(i)||(n.placeholder=i),t(e).select2(n)}}const f=function(e){const n=t(e).find(".font-options__options-list").find("[data-field]"),s=e.children(".customify_font_values"),i=v(s.val()),o=t(s).data("customize-setting-link"),a=l(o),d=_.isEmpty(i)?{}:i;if(!0===c[o])return;if(!0===u[o])return;c[o]=!0,n.each((function(e,n){const s=t(n),i=s.data("field");let o=s.val();if(!_.isUndefined(i)&&!s.data("disabled")&&(s.data("touched")||_.isUndefined(d[i]))){if("font_family"===i){const e=t(n.options[n.selectedIndex]).data("src");e?d.src=e:delete d.src}_.isUndefined(o)||_.isNull(o)||""===o?delete d[i]:(_.includes(["letter_spacing","line_height","font_size"],i)&&(o=h(o,n,!1)),d[i]=o)}})),delete d.variants,delete d.subsets;const f=g(d.font_family);void 0!==d.font_variant&&void 0!==f.variants&&Object.keys(f.variants).length>0&&_.includes(f.variants,d.font_variant)||delete d.font_variant,void 0!==d.selected_subsets&&void 0!==f.subsets&&Object.keys(f.subsets).length>0?d.selected_subsets=_.intersection(d.selected_subsets,f.subsets):delete d.selected_subsets;const r=p(d);return s.val(r),a.set(r),c[o]=!1,d};const r=function(){const e=t(".js-font-option-toggle");e.on("click",(function(){const n=t(this);!0===n.prop("checked")&&e.not(n).prop("checked",!1)}))},v=function(t){let e;try{e=JSON.parse(decodeURIComponent(t))}catch(n){e=t}return e},p=function(t){return encodeURIComponent(JSON.stringify(t))},h=function(e,n,s=!0){const i={value:!1,unit:""};if(isNaN(e)){if(void 0!==e.value)i.value=e.value,void 0!==e.unit&&(i.unit=e.unit.toLowerCase());else if(void 0!==e[0])i.value=e[0],void 0!==e[1]&&(i.unit=e[1].toLowerCase());else if("string"==typeof e){const t=e.match(/^([\d.\-+]+)(.+)/i);null!==t&&void 0!==t[1]&&(i.value=t[1],_.isEmpty(t[2])||(i.unit=t[2].toLocaleLowerCase()))}}else i.value=e;if(_.isEmpty(i.unit)){let e="";s?_.isEmpty(t(n).data("value_unit"))?_.isEmpty(t(n).data("unit"))||(e=t(n).data("unit").toLowerCase()):e=t(n).data("value_unit").toLowerCase():_.isEmpty(t(n).data("unit"))?_.isEmpty(t(n).data("value_unit"))||(e=t(n).data("value_unit").toLowerCase()):e=t(n).data("unit").toLowerCase(),i.unit=e}return i},m=function(t){let n="std_font";return void 0!==e.fonts.theme_fonts[t]?n="theme_font":void 0!==e.fonts.cloud_fonts[t]?n="cloud_font":void 0!==e.fonts.google_fonts[t]&&(n="google_font"),n},g=function(t,n=!1){switch(!1===n&&(n=m(t)),n){case"theme_font":return e.fonts.theme_fonts[t];case"cloud_font":return e.fonts.cloud_fonts[t];case"google_font":return e.fonts.google_fonts[t];case"std_font":if(void 0!==e.fonts.std_fonts[t])return e.fonts.std_fonts[t]}return!1};return{init:function(){i=e.l10n.fonts.familyPlaceholderText,o=e.l10n.fonts.variantAutoText,a=e.l10n.fonts.subsetPlaceholderText;const n=t(".customify_font_family");void 0!==l.settings.google_fonts_opts&&n.each((function(e,n){const s=t(n).find(".google-fonts-opts-placeholder").first();if(s){s.replaceWith(l.settings.google_fonts_opts);const e=t(n).data("active_font_family");void 0!==e&&t(n).val(e)}})),n.select2({placeholder:i}),n.on("change",(function(e){const n=e.target.value,i=t(e.target).closest(s),l=g(n);!function(e,n){const s=void 0!==e.variants?e.variants:[],i=n.find(".customify_font_weight"),a=i.val()?i.val():"",l=[];t(i).val(null).empty(),t(i).hasClass("select2-hidden-accessible")&&t(i).select2("destroy");if(t(i).data("touched",!1),void 0===s||Object.keys(s).length<2||!_.isUndefined(i.data("disabled")))return i.parent().hide(),void i.parent().prev("label").hide();l.push({id:"",text:o}),t.each(s,(function(t,e){let n={id:e,text:e};a==e&&(n.selected=!0),l.push(n)})),t(i).select2({data:l}),i.parent().show(),i.parent().prev("label").show()}(l,i),function(e,n){const s=void 0!==e.subsets?e.subsets:[],i=n.find(".customify_font_subsets"),o=[];t(i).val(null).empty(),t(i).hasClass("select2-hidden-accessible")&&t(i).select2("destroy");if(t(i).data("touched",!1),void 0===s||Object.keys(s).length<2||!_.isUndefined(i.data("disabled")))return i.parent().hide(),void i.parent().prev("label").hide();const l=v(n.children(".customify_font_values").val());let c=[];_.isUndefined(l.selected_subsets)||_.isEmpty(l.selected_subsets)||(c=l.selected_subsets,Array.isArray(c)||(c=Object.keys(c).map((function(t){return c[t]}))));t.each(s,(function(t,e){if("latin"===e)return;const n={id:e,text:e};-1!==c.indexOf(e)&&(n.selected=!0),o.push(n)})),t(i).select2({data:o,placeholder:a}),i.parent().show(),i.parent().prev("label").show()}(l,i),f(i)})).on("input",(function(e){t(e.target).data("touched",!0)})),n.each((function(e,n){const i=t(n).closest(s),o=i.children(".customify_font_values"),a=t(o).data("customize-setting-link");l(a).bind((function(e,n){c[this.id]||(o.val(e),function(e){const n=t(e).find(".font-options__options-list").find("[data-field]"),s=e.children(".customify_font_values"),i=v(s.val()),o=t(s).data("customize-setting-link");if(!0===u[o])return;u[o]=!0,n.each((function(e,n){const s=t(n),o=s.data("field");if(void 0!==o&&""!==o&&void 0!==i[o]){if(_.includes(["letter_spacing","line_height","font_size"],o)){const t=h(i[o],n);""!==t.unit&&(s.data("value_unit",t.unit),_.isEmpty(s.attr("unit"))&&s.attr("unit",t.unit));const e=16,a=s.attr("unit").trim().toLowerCase(),l=s.data("value_unit").trim().toLowerCase();a!=l&&(_.includes(["em","rem"],l)&&"px"===a?t.value=t.value*e:_.includes(["em","rem"],a)&&"px"===l&&(t.value=t.value/e)),s.attr("min")&&s.attr("min")>t.value&&s.attr("min",t.value),s.attr("max")&&s.attr("max")<t.value&&s.attr("max",t.value),s.val(t.value)}else s.val(i[o]);s.data("touched",!1),s.trigger("change")}})),u[o]=!1}(i))}))})),d(t(".customify_font_weight"),!0),d(t(".customify_font_subsets"),!0,a),d(n.parents(s).find("select").not("select[class*=' select2'],select[class^='select2']"),!1),d(n.parents(s).find("input[type=range]"),!1),r()},getValue:function(t){const e=t.children(".customify_font_values");return e.length?v(e.val()):[]},updateValue:function(e,n){const s=e.children(".customify_font_values"),i=t(s).data("customize-setting-link"),o=l(i);s.length&&(_.isArrayLikeObject(n)&&(n=p(n)),s.val(n),o.set(n))},selfUpdateValue:f,encodeValues:p,standardizeNumericalValue:h,determineFontType:m,getFontDetails:g,convertFontVariantToFVD:function(t){let e,n="n";switch(-1!==(t=String(t)).indexOf("italic")?(n="i",t=t.replace("italic","")):-1!==t.indexOf("oblique")&&(n="o",t=t.replace("oblique","")),t){case"100":e="1";break;case"200":e="2";break;case"300":e="3";break;case"500":e="5";break;case"600":e="6";break;case"700":case"bold":e="7";break;case"800":e="8";break;case"900":e="9";break;default:e="4"}return n+e}}}())}(jQuery,customify,wp);