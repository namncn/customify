window.customify=window.customify||parent.customify||{},function(e,t,n){void 0===t.search&&(t.search={}),_.extend(t.search,function(){const i=n.customize,s="#customify-customizer-search-input";let c=null,o=null;const a=function(){const n=_.map(i.settings.controls,(function(e,n){"string"!=typeof n&&(n=String(n));if(void 0!==_.find(t.search.excludedControls,(function(e){return-1!==n.indexOf(e)})))return;const s={label:void 0===e.label||_.isEmpty(e.label)?"":e.label,description:void 0===e.description||_.isEmpty(e.description)?"":e.description,panelName:"",sectionName:"",panel:null,section:e.section};return _.map(i.settings.sections,(function(t,n){e.section===t.id&&_.map(_wpCustomizeSettings.panels,(function(e,n){""===t.panel&&(s.panelName=t.title),t.panel===e.id&&(s.sectionName=t.title,s.panel=t.panel,s.panelName=e.title)}))})),s})).filter((function(e){return void 0!==e}));o=new Fuse(n,{includeScore:!0,includeMatches:!0,shouldSort:!0,minMatchCharLength:2,threshold:.3,keys:[{name:"label",weight:1},{name:"description",weight:.8},{name:"panelName",weight:.4},{name:"sectionName",weight:.4}]});const a=e("#customize-info");c=e("#customize-theme-controls"),c.after('<div id="customify-search-results"></div>'),a.on("keyup",s,(function(t){t.preventDefault();const n=e(s).val();n.length>2?l(n):0===n.length&&p()})),a.on("click",".clear-search",(function(e){p()})),a.on("click",".close-search",(function(e){m()})),a.on("click",".customize-search-toggle",(function(e){m()})),i.previewer.targetWindow.bind(d),i.state("expandedSection").bind(r),i.state("expandedPanel").bind(r)},r=function(){if(!i.state("expandedSection").get()&&!i.state("expandedPanel").get()){const t=e(s).val();t.length>2&&setTimeout((function(){l(t)}),400)}},l=function(n){const i=o.search(n);if(0===i.length)return void c.removeClass("search-found");const s=i.map((function(n,i){if(_.isEmpty(n.matches)||""===n.item.label)return;const s=e.extend(!0,{},n);_.each(n.matches,(function(e){void 0===e.indices||_.isEmpty(e.indices)||(s.item[e.key]=u(e.value,e.indices))}));let c=s.item.panelName;return""!==s.item.sectionName&&(c=`${c} â–¸ ${s.item.sectionName}`),`\n                <li id="accordion-section-${n.item.section}" class="accordion-section control-section control-section-default customizer-search-results" aria-owns="sub-accordion-section-${n.item.section}" data-section="${n.item.section}">\n                    <h3 class="accordion-section-title" tabindex="0">\n                        ${s.item.label}\n                        <span class="screen-reader-text">${t.l10n.search.resultsSectionScreenReaderText}</span>\n                    </h3>\n                    <span class="search-setting-path">${c}</i></span>\n                </li>\n                `})).join("");c.addClass("search-found"),document.getElementById("customify-search-results").innerHTML=`<ul>${s}</ul>`;document.querySelectorAll("#customify-search-results .accordion-section").forEach(e=>e.addEventListener("click",f))},u=function(e,t){if(!t)return e;const n=[];let i=t.shift();for(let s=0;s<e.length;s++){const c=e.charAt(s);i&&s==i[0]&&n.push('<span class="hl">'),n.push(c),i&&s==i[1]&&(n.push("</span>"),i=t.shift())}return n.join("")},d=function(){let t=n.template("customify-search-button");0===e("#customize-info .accordion-section-title .customize-search-toggle").length&&e("#customize-info .accordion-section-title").append(t()),t=n.template("customify-search-form"),0===e("#customize-info #accordion-section-customify-customizer-search").length&&e("#customize-info .customize-panel-description").after(t())},m=function(){const t=e("#accordion-section-customify-customizer-search");t.hasClass("open")?(t.removeClass("open"),t.slideUp("fast"),p()):(e(".customize-panel-description").removeClass("open"),e(".customize-panel-description").slideUp("fast"),t.addClass("open"),t.slideDown("fast"),e(s).focus())},f=function(t){const n=this.getAttribute("data-section"),o=i.section(n);c.removeClass("search-found"),document.getElementById("customify-search-results").innerHTML="",e(s).focus(),o.expand()},p=function(){c.removeClass("search-found"),document.getElementById("customify-search-results").innerHTML="",document.getElementById("customify-customizer-search-input").value="",e(s).focus()};return i.bind("ready",a),{init:a}}())}(jQuery,customify,wp);