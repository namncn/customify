window.customify=window.customify||{},function(e,t,n){t.colorPalettes=function(){const o=n.customize;let s;const i=["sm_color_primary","sm_color_secondary","sm_color_tertiary","sm_dark_primary","sm_dark_secondary","sm_dark_tertiary","sm_light_primary","sm_light_secondary","sm_light_tertiary"],c={sm_color_primary:"",sm_color_secondary:"",sm_color_tertiary:"",sm_dark_primary:"",sm_dark_secondary:"",sm_dark_tertiary:"",sm_light_primary:"",sm_light_secondary:"",sm_light_tertiary:""};let r=!1;const a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function l(e){return isNaN(e)?"00":a[(e-e%16)/16]+a[e%16]}function d(e){return"#"+l(e[0])+l(e[1])+l(e[2])}function u(e){return d(b(e.hue,e.saturation,e.lightness))}function f(e){let t=0,n=0,o=0,s=0;/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(e)&&(3===(e=e.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2],"F","F"]),4===e.length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2],e[3],e[3]]),t=parseInt([e[0],e[1]].join(""),16),n=parseInt([e[2],e[3]].join(""),16),o=parseInt([e[4],e[5]].join(""),16),s=parseInt([e[6],e[7]].join(""),16));const i=m(t,n,o);return{red:t,green:n,blue:o,alpha:s,hue:i[0],saturation:i[1],lightness:i[2],luma:.2126*t+.7152*n+.0722*o}}function m(e,t,n){e/=255,t/=255,n/=255;const o=Math.max(e,t,n),s=Math.min(e,t,n);let i,c,r=(o+s)/2;if(o==s)i=c=0;else{const a=o-s;switch(c=r>.5?a/(2-o-s):a/(o+s),o){case e:i=(t-n)/a+(t<n?6:0);break;case t:i=(n-e)/a+2;break;case n:i=(e-t)/a+4}i/=6}return[i,c,r]}const h=()=>{_.each(i,(function(e){const t=o(e);if(void 0!==t){const n=t();c[e]=w(n)}}))},p=e=>c[e],g=function(){_.each(i,(function(e){if(void 0!==s[e]){const n=s[e],i=o(e);_.isUndefined(n.connected_fields)||(t.colorsConnectedFieldsCallbacks[e]=function(e,t){return function(n,s){const i=p(t);_.each(e.connected_fields,(function(e){if(_.isUndefined(e)||_.isUndefined(e.setting_id)||!_.isString(e.setting_id))return;const t=o(e.setting_id);_.isUndefined(t)||t.set(i)})),B();const c=o(t+"_final");_.isUndefined(c)||(_.isUndefined(e.connected_fields)||_.isEmpty(e.connected_fields)?c.set(""):c.set(i))}}(n,e),i.bind(t.colorsConnectedFieldsCallbacks[e]),_.each(n.connected_fields,(function(e){const n=e.setting_id,s=o(n);void 0!==s&&(t.colorsConnectedFieldsCallbacks[n]=D,s.bind(t.colorsConnectedFieldsCallbacks[n]))})))}}))},y=function(){_.each(t.colorsConnectedFieldsCallbacks,(function(e,t){o(t).unbind(e)})),t.colorsConnectedFieldsCallbacks={}},v=e=>t.colorPalettesVariations.hasOwnProperty(e)?t.colorPalettesVariations[e]:"light",k=()=>{const e=[];return _.each(i,(function(t){const n=o(t)();e.push(n)})),e};function b(e,t,n){let o,s,i;if(0==t)o=s=i=n;else{const c=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},r=n<.5?n*(1+t):n+t-n*t,a=2*n-r;o=c(a,r,e+1/3),s=c(a,r,e),i=c(a,r,e-1/3)}return[Math.round(255*o),Math.round(255*s),Math.round(255*i)]}function C(e,t,n,o){return t[e]*(1-o)+n[e]*o}function F(e,t,n){return e*(1-n)+t*n}const w=(t,n)=>{n=void 0===n?e('[name*="sm_palette_filter"]:checked').val():n;let o=f(t);const s=k(),i=s.slice(0,3),c=s.slice(3,6);M(J(s)),M(J(i)),M(J(c));if("vivid"===n)return o=b(o.hue,F(o.saturation,1,.5),o.lightness),d(o);if("warm"===n&&t!==s[0]){let e=f("#704214");return e.saturation=C("saturation",e,o,1),e.lightness=C("lightness",e,o,1),e=f(u(e)),o.saturation=.75*o.saturation,o=f(u(o)),a=e,l=(l=.75)||.5,(r=o).red=parseInt(a.red*l+r.red*(1-l),10),r.green=parseInt(a.green*l+r.green*(1-l),10),r.blue=parseInt(a.blue*l+r.blue*(1-l),10),o=f(d([r.red,r.green,r.blue])),o.lightness=C("lightness",o,f(o.lightness>.5?"#FFF":"#000"),.2),u(o)}var r,a,l;if("softer"===n)return o.saturation=C("saturation",o,f("#FFF"),.3),o.lightness=C("lightness",o,f("#FFF"),.1),u(o);if("pastel"===n)return o.saturation=C("saturation",o,f("#FFF"),.6),o.lightness=C("lightness",o,f("#FFF"),.2),u(o);if("greyish"===n)return o=b(o.hue,F(o.saturation,0,.8),o.lightness),d(o);if("clarendon"===n)return t===s[0]||t===s[1]||t===s[2]?(o=b(o.hue,F(o.saturation,1,.3),o.lightness),d(o)):(t!==s[3]&&t!==s[4]&&t!==s[5]||(o.lightness=C("lightness",o,f("#000"),.4)),t!==s[6]&&t!==s[7]&&t!==s[8]||(o.lightness=C("lightness",o,f("#FFF"),.4)),u(o));if("cold"===n&&t!==s[0]){const e=.55;o.saturation=C("saturation",o,f("#FFF"),.4),o.hue=(o.hue-e)/18+e,o=f(u(o));const t=m(o.red,o.green,o.blue);return o.hue=t[0],o.saturation=F(t[1],1,.1),o.lightness=C("lightness",o,f(o.lightness>.5?"#FFF":"#000"),.2),u(o)}return"dumb"===n?t===s[1]||t===s[2]?(o=f(s[0]),o.lightness=C("lightness",o,f("#000"),.2),o.saturation=C("saturation",o,f("#000"),.2),t===s[2]&&(o.lightness=C("lightness",o,f("#000"),.2),o.saturation=C("saturation",o,f("#000"),.2)),u(o)):(o.hue=f(s[0]).hue,u(o)):"mayfair"===n?t===s[1]||t===s[2]?(o=f(s[0]),o.hue=(o.hue+.05)%1,t===s[2]&&(o.hue=(o.hue+.05)%1),u(o)):(o.hue=f(s[0]).hue,u(o)):"sierra"===n?t===s[1]||t===s[2]?(o=f(s[0]),o.hue=(o.hue+.95)%1,t===s[2]&&(o.hue=(o.hue+.95)%1),u(o)):(o.hue=f(s[0]).hue,u(o)):t},U=function(){_.each(i,(function(t){e(".c-color-palette").find(".sm-color-palette__color."+t).css("color",p(t))}))},j=function(){_.each(i,(function(t){const n=o(t)();e(".c-color-palette").find(".sm-color-palette__color."+t).css("color",n)}))},O=function(){e(this).trigger("customify:preset-change"),h(),A()},z=_.debounce(()=>{let t=e();_.each(i,(function(n){if(void 0!==s[n]){const o=s[n];_.isUndefined(o.connected_fields)||_.each(o.connected_fields,(function(n){const o=n.setting_id.match(/\[(.*?)\]/);if(o){const n=o[1],s=e(".customize-control-color").filter('[id*="'+n+'"]').find(".wp-color-picker");t=t.add(s)}}))}})),t.iris({palettes:k()})},30),D=_.debounce(()=>{const t=[];let n;_.each(i,(function(e){let n=s[e].connected_fields;const i=o(e)();let c=!1;_.isUndefined(n)||Array.isArray(n)||(n=Object.keys(n).map((function(e){return n[e]}))),!_.isUndefined(n)&&n.length&&(_.each(n,(function(e){const t=e.setting_id,n=o(t);if(void 0!==n){const e=n();"string"==typeof e&&e.toLowerCase()!==w(i).toLowerCase()&&(c=!0)}})),c&&t.push(e))})),n="."+t.join(", ."),e(".c-color-palette .color").removeClass("altered"),t.length&&e(".c-color-palette .color").filter(n).addClass("altered")},30),S=_.debounce(()=>{const t=[];let n;_.each(i,(function(e){const n=s[e].connected_fields;_.isUndefined(n)||_.isEmpty(n)||t.push(e)})),n=_.isEmpty(t)?"*":"."+t.join(", ."),e(".sm-palette-filter .color").addClass("hidden").filter(n).removeClass("hidden"),e(".sm-color-palette__color").addClass("hidden").filter(n).removeClass("hidden"),e(".js-color-palette .palette__item").addClass("hidden").filter(n).removeClass("hidden")},30),P=()=>{D(),S(),z(),U()},I=(e,t)=>{const n=JSON.parse(JSON.stringify(e)),o=JSON.parse(JSON.stringify(e));return _.each(t,(function(e,t){if(void 0!==n[t]){let s=[];e instanceof Array&&_.each(e,(function(e){let t;_.isUndefined(o[e].connected_fields)&&(o[e].connected_fields=[]),t=Object.values(o[e].connected_fields),s=s.concat(t)})),n[t].connected_fields=Object.keys(s).map((function(e){return s[e]}))}})),_.clone(n)},N=(e,t,n,o)=>{const s=_.clone(e);if(!_.isUndefined(s[n])&&!_.isUndefined(s[t])){_.isUndefined(s[t].connected_fields)&&(s[t].connected_fields=[]),_.isUndefined(s[n].connected_fields)&&(s[n].connected_fields=[]);const e=Object.values(s[t].connected_fields),i=Object.values(s[n].connected_fields).concat(e),c=Math.round(o*i.length);let r=i.slice(0,c);const a=i.slice(c);r=Object.keys(r).map((function(e){return r[e]})),r=Object.keys(r).map((function(e){return r[e]})),s[n].connected_fields=r,s[t].connected_fields=a}return s},x=()=>{let n=JSON.parse(JSON.stringify(t.settingsClone));const c=e('[name*="sm_color_diversity"]'),r=e('[name*="sm_coloration_level"]'),a=!!c.length,l=void 0!==c.filter(":checked").data("default"),d=!a||l,u=!!r.length,f=void 0!==e('[name*="sm_coloration_level"]:checked').data("default"),m=!u||f,h=a?e('[name*="sm_color_diversity"]:checked').val():o("sm_color_diversity")();if(!d||!m){const t=e("#_customize-input-sm_dark_color_primary_slider_control").val()/100,o=e("#_customize-input-sm_dark_color_secondary_slider_control").val()/100,s=e("#_customize-input-sm_dark_color_tertiary_slider_control").val()/100;n=N(n,"sm_dark_primary","sm_color_primary",t),n=N(n,"sm_dark_secondary","sm_color_secondary",o),n=N(n,"sm_dark_tertiary","sm_color_tertiary",s);const i=v("color_diversity_low");n=I(n,i),"medium"===h&&(n=N(n,"sm_color_primary","sm_color_secondary",.5)),"high"===h&&(n=N(n,"sm_color_primary","sm_color_secondary",.67),n=N(n,"sm_color_secondary","sm_color_tertiary",.5))}const p=e('[name*="sm_shuffle_colors"]:checked').val();if("default"!==p){const e=v("shuffle_"+p);n=I(n,e)}if("on"===e('[name*="sm_dark_mode"]:checked').val()){const e=v("dark");n=I(n,e)}_.each(i,(function(e){s[e]=n[e]}))},J=function(e){const t=[];return _.each(e,(function(e){t.push(f(e))})),t},M=function(e){const t={red:0,green:0,blue:0,alpha:0,hue:0,saturation:0,lightness:0,luma:0};for(let n=0;n<e.length;n++){const o=e[n];for(let e in t)t[e]+=o[e]}for(let n in t)t[n]/=e.length;return t},E=()=>{const n=e('[name*="sm_coloration_level"]:checked').val();if(void 0!==e('[name*="sm_coloration_level"]:checked').data("default")){const n=["sm_dark_color_primary_slider","sm_dark_color_secondary_slider","sm_dark_color_tertiary_slider"];_.each(n,(function(n){const s=t.config.settings[n];o(n).set(s.default),e("#_customize-input-"+n+"_control ").val(s.default)}))}else{const t=parseFloat(n);e("#_customize-input-sm_dark_color_primary_slider_control, #_customize-input-sm_dark_color_secondary_slider_control, #_customize-input-sm_dark_color_tertiary_slider_control").val(t)}A()},A=()=>{x(),y(),g(),P(),_.each(i,(function(e){if(void 0!==o(e)){let t=s[e];const n=p(e);_.each(t.connected_fields,(function(e){if(_.isUndefined(e)||_.isUndefined(e.setting_id)||!_.isString(e.setting_id))return;const t=o(e.setting_id);_.isUndefined(t)||t.set(n)}));const i=o(e+"_final");_.isUndefined(i)||(_.isUndefined(t.connected_fields)||_.isEmpty(t.connected_fields)?i.set(""):i.set(n))}}))},V=t=>{const n=!!e(".c-color-palette .color.altered").length;let o=!0;return n&&(o=confirm("One or more fields connected to the color palette have been modified. By changing the palette variation you will lose changes to any color made prior to this action.")),!(n&&!o)&&("function"==typeof t&&t(),!0)},L=()=>{const n=e(".c-color-palette__control"),s=(()=>{const e=o("sm_color_palette_variation");if(_.isUndefined(e))return"light";const n=e();return t.colorPalettesVariations.hasOwnProperty(n)?n:"light"})();n.removeClass("active"),n.filter(".variation-"+s).addClass("active"),e(document).on("click",".js-color-palette input",(function(e){V(O.bind(this))||e.preventDefault()})),e('[for*="sm_palette_filter"], [for*="sm_coloration_level"], [for*="sm_color_diversity"], [for*="sm_shuffle_colors"], [for*="sm_dark_mode"]').on("click",(function(e){V()||e.preventDefault()})),e('[name*="sm_coloration_level"]').on("change",E),e('[name*="sm_color_diversity"]').on("change",A),e('[name*="sm_shuffle_colors"]').on("change",A),e('[name*="sm_dark_mode"]').on("change",A),e('[name*="sm_palette_filter"]').on("change",()=>{h(),A()}),e(document).on("click",".sm-tabs__item",(function(t){t.preventDefault();const n=e("#sub-accordion-section-sm_color_palettes_section"),o=e(".sm-tabs__item"),s=e(this),i=s.data("target");o.removeClass("sm-tabs__item--active"),s.addClass("sm-tabs__item--active"),n.removeClass("sm-view-palettes sm-view-filters sm-view-customize").addClass("sm-view-"+i)})),e(".sm-tabs__item").first().trigger("click")},B=_.debounce(()=>{e(".sm-palette-filter").each((function(){e(this).find("input").each((function(t,n){const s=e(n),i=s.next("label"),c=s.val();i.find(".sm-color-palette__color").each((function(t,n){const s=e(n),i=s.data("setting"),r=o(i)();s.css("color",w(r,c))}))}))}))},30);function Q(e,t){const n=o(e)(),s=o(t)();o(e).set(s),o(t).set(n)}return o.bind("ready",(function(){s=o.settings.settings,r||(void 0===t.settingsClone&&(t.settingsClone=e.extend(!0,{},s)),void 0===t.colorsConnectedFieldsCallbacks&&(t.colorsConnectedFieldsCallbacks={}),r=!0),(()=>{const t=e(".c-color-palette"),n=t.find(".c-color-palette__fields").find("input");if(!t.length)return;const s=t.find(".sm-color-palette__color");s.each((i,r)=>{const a=e(r),l=a.data("setting"),d=n.filter("."+l),_=o(l);if(a.data("target",d),a.hasClass("js-no-picker"))return;d.iris({change:(e,n)=>{const o=n.color.toString();a.css("color",w(o)),c[l]=w(o),_.set(o),"external"!==e.originalEvent.type&&t.find(".sm-color-palette__color."+l).removeClass("altered"),z()}}),a.find(".iris-picker").on("click",(function(e){e.stopPropagation(),e.preventDefault()}));const u=()=>{s.not(a).each((function(t,n){e(n).data("target").not(d).hide()})),d.show().focus()};a.on("click",e=>{e.stopPropagation(),e.preventDefault(),d.is(":visible")?(d.iris("hide"),d.hide(),s.removeClass("active inactive")):a.is(".altered")?V(u):u()}),d.on("click",e=>{e.stopPropagation(),e.preventDefault()}),d.on("focus",n=>{s.not(a).addClass("inactive").removeClass("active"),a.addClass("active").removeClass("inactive"),s.not(a).each((function(t,n){e(n).data("target").iris("hide")}));const o=d.next(".iris-picker"),i=t.find(".c-color-palette__colors").outerWidth(),c=s.filter(":visible"),r=c.index(a);o.css("left",(i-200)*r/(c.length-1)),j(),d.iris("show")}),d.on("focusout",e=>{U()})}),e("body").on("click",(function(){s.removeClass("active inactive"),s.each((function(t,n){const o=e(n).data("target");e(n).hasClass("js-no-picker")||o.iris("hide"),o.hide()}))}))})(),x(),h(),y(),g(),P(),B(),function(){const t=e(document);t.on("click",'[data-action="sm_swap_colors"]',(function(e){e.preventDefault(),Q("sm_color_primary","sm_color_secondary")})),t.on("click",'[data-action="sm_swap_dark_light"]',(function(e){e.preventDefault(),Q("sm_dark_primary","sm_light_primary"),Q("sm_dark_secondary","sm_light_secondary"),Q("sm_dark_tertiary","sm_light_tertiary")})),t.on("click",'[data-action="sm_swap_colors_dark"]',(function(e){e.preventDefault(),Q("sm_color_primary","sm_dark_primary"),Q("sm_color_secondary","sm_dark_secondary"),Q("sm_color_tertiary","sm_dark_tertiary")})),t.on("click",'[data-action="sm_swap_secondary_colors_dark"]',(function(e){e.preventDefault(),Q("sm_color_secondary","sm_dark_secondary")}))}(),L()})),{masterSettingIds:i}}()}(jQuery,customify,wp);